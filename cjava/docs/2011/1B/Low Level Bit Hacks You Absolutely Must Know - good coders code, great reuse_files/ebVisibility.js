EBGInfra={declareNamespace:function(a){for(var b=window.EBG,a=a.split("."),c=0;c<a.length;c++){var d=a[c],e=b[d];e||(e=b[d]={});b=e}},declareClass:function(a,b){a.prototype.constructor=a;if(b)a.__superClass=b,a.__basePrototypePending=!0,EBG._resolveInheritance(a);return a},runTimed:function(a,b,c,d){return setTimeout(function(){b.apply(a,c)},d)},setInterval:function(a,b,c,d){return setInterval(function(){b.apply(a,c)},d)},clearInterval:function(a){clearInterval(a)},_resolveInheritance:function(a){if(a.__basePrototypePending){var b=
a.__superClass;EBG._resolveInheritance(b);var b=b.prototype,c=a.prototype,d;for(d in b)c[d]=c[d]||b[d];delete a.__basePrototypePending}},callSuperConstructor:function(a,b,c){(a=a.__superClass)&&(c?a.apply(b,c):a.apply(b));return b},callSuperFunction:function(a,b,c,d){if(a=a.__superClass)var e=a.prototype[c];if(e instanceof Function)return d?e.apply(b,d):e.apply(b)},typeOf:function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array||!(a instanceof Object)&&"[object Array]"==Object.prototype.toString.call(a)||
"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if(!(a instanceof Object)&&("[object Function]"==Object.prototype.toString.call(a)||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call")))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b},isFunc:function(a){return"function"==EBG.typeOf(a)},isDefined:function(a){return"undefined"!=
EBG.typeOf(a)},hasValue:function(a){return null!=a&&"undefined"!=EBG.typeOf(a)},isObj:function(a){return"object"==EBG.typeOf(a)},isBool:function(a){return"boolean"==EBG.typeOf(a)},format:function(a){for(var b=1;b<arguments.length;b++)a=a.replace(RegExp("\\{"+(b-1)+"\\}","gi"),""+arguments[b]);return a},throwEx:function(a){throw{name:"",message:a};},mergeObj:function(a,b,c){var c=!!c,d;for(d in a)if(a.hasOwnProperty(d)&&(!b.hasOwnProperty(d)||c))b[d]=a[d]},cloneObj:function(a){if(!EBG.isObj(a))return null;
var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=EBG.isObj(a[c])?EBG.cloneObj(a[c]):a[c]);return b},combinePaths:function(a,b){a=a||"";b=b||"";a&&"/"!=a[a.length-1]&&(a+="/");var c=a;b&&(c+=b);return c},px:function(a){return EBG.format("{0}px",a)},strEQ:function(a,b,c){return a&&b?c?a===b:a.toLowerCase()===b.toLowerCase():!1},indexOfArray:function(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return c;return-1},isGlobalDef:function(a,b){var c="undefined"!=eval("typeof("+a+")");b&&c&&(c=eval(a+"=="+b));
return c},numberToEnum:function(a,b){var c="",d;for(d in b)if(b.hasOwnProperty(d)&&b[d]===a){c=d;break}return c}};EBG=window.EBG||{};EBGInfra.mergeObj(EBGInfra,EBG,!1);EBG.declareNamespace("Logging");EBG.Logging.LoggerLevels={NONE:0,ERROR:1,INFO:2,WARN:3,DEBUG:4};EBG.Logging.Logger=function(a){this._level=a;this.startNestingGroupNames=[];this.endNestingGroupNames=[]};
EBG.Logging.Logger.prototype={setLevel:function(a){this._level=a},debug:function(a){this._reportToLog(EBG.Logging.LoggerLevels.DEBUG,arguments)},info:function(a){this._reportToLog(EBG.Logging.LoggerLevels.INFO,arguments)},warn:function(a){this._reportToLog(EBG.Logging.LoggerLevels.WARN,arguments)},error:function(a){this._reportToLog(EBG.Logging.LoggerLevels.ERROR,arguments)},exception:function(a,b){var c="string"!==b?EBG.format("Exception in {0}. message: {1}",a,b.message):EBG.format("Exception in: {0}. message: {1}",
a,b);b.stack&&(c+=EBG.format(" stack: {0}",b.stack));this._reportToLog(EBG.Logging.LoggerLevels.ERROR,[c])},startGroup:function(a){this._supportNesting()&&this.startNestingGroupNames.push(a)},endGroup:function(){this._supportNesting()&&0<this.endNestingGroupNames.length&&window.console.groupEnd(this.endNestingGroupNames.pop())},_consoleAvailable:function(){return void 0!==window.console},_supportNesting:function(){return this._consoleAvailable()?void 0!==window.console.group:!1},_supportErrorMessage:function(){return void 0!==
window.console.error},_supportInfoMessage:function(){return void 0!==window.console.info||void 0!==window.opera},_supportWarnMessage:function(){return void 0!==window.console.warn||void 0!==window.opera},_supportObjectView:function(){return void 0!==window.console.dir||void 0!==window.opera},_callConsoleFunction:function(a,b){var c=!1;switch(a){case EBG.Logging.LoggerLevels.INFO:this._supportInfoMessage()&&(window.console.info(b),c=!0);break;case EBG.Logging.LoggerLevels.WARN:this._supportWarnMessage()&&
(window.console.warn(b),c=!0);break;case EBG.Logging.LoggerLevels.ERROR:this._supportErrorMessage()&&(consoleFunction=window.console.error(b),c=!0)}c||window.console.log(b)},_reportToLog:function(a,b){if(this._level>=a&&this._consoleAvailable()){var c=b[0];"[object String]"!==Object.prototype.toString.call(c)?this._supportObjectView()||(c=c.toString()):c=EBG.format.apply(null,b);if(void 0===window.opera){for(;this.startNestingGroupNames.length;)window.console.group(this.startNestingGroupNames[0]),
this.endNestingGroupNames.push(this.startNestingGroupNames.shift());this._callConsoleFunction(a,c)}else opera.postError(c)}}};EBG.declareClass(EBG.Logging.Logger,null);EBG.log=EBG.log||new EBG.Logging.Logger(EBG.Logging.LoggerLevels.DEBUG);
(function(a,b,c){b||(b={fn:{},extend:function(){for(var a=arguments[0],b=1,c=arguments.length;b<c;b++){var d=arguments[b],i;for(i in d)a[i]=d[i]}return a}});b.fn.pm=function(){return this};b.pm=EBG.pm=function(a){d.send(a)};b.pm.bind=EBG.bind=function(a,b,c,h,i){d.bind(a,b,c,h,i)};b.pm.unbind=EBG.unbind=function(a,b){d.unbind(a,b)};b.pm.origin=EBG.pm.origin=null;var d={send:function(a){var a=b.extend({},d.defaults,a),c=a.target;if(a.target&&a.type){var g={data:a.data,type:a.type};if(a.success)g.callback=
d._callback(a.success);if(a.error)g.errback=d._callback(a.error);"postMessage"in c&&!a.hash&&(d._bind(),c.postMessage(JSON.stringify(g),a.origin||"*"))}},bind:function(c,f,g,h,i,k){"postMessage"in a&&!k&&(d._bind(h),h=d.data("listeners.postmessage"),h||(h={},d.data("listeners.postmessage",h)),k=h[c],k||(k=[],h[c]=k),k.push({fn:f,origin:i||b.pm.origin,bindObj:g}))},unbind:function(a,b){var c=d.data("listeners.postmessage");if(c&&a)if(b){var h=c[a];if(h){for(var i=[],k=0,m=h.length;k<m;k++){var l=h[k];
l.fn!==b&&i.push(l)}c[a]=i}}else delete c[a]},data:function(a,b){return b===c?d._data[a]:d._data[a]=b},_data:{},_CHARS:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),_random:function(){for(var a=[],b=0;32>b;b++)a[b]=d._CHARS[0|32*Math.random()];return a.join("")},_callback:function(a){var b=d.data("callbacks.postmessage");b||(b={},d.data("callbacks.postmessage",b));var c=d._random();b[c]=a;return c},_bind:function(b){d.data("listening.postmessage")||(b=b?b:a,b.addEventListener?
b.addEventListener("message",d._dispatch,!1):a.attachEvent&&b.attachEvent("onmessage",d._dispatch),d.data("listening.postmessage",1))},_dispatch:function(a){try{var b=JSON.parse(a.data)}catch(c){return}if(b.type){var h=(d.data("callbacks.postmessage")||{})[b.type];if(h)h(b.data);else for(var h=(d.data("listeners.postmessage")||{})[b.type]||[],i=0,k=h.length;i<k;i++){var m=h[i];if(m.origin&&a.origin!==m.origin)b.errback&&d.send({target:a.source,data:{message:"postmessage origin mismatch",origin:[a.origin,
m.origin]},type:b.errback});else try{var l;l=m.bindObj?m.fn.apply(m.bindObj,[b.data,a]):m.fn(b.data,a);b.callback&&d.send({target:a.source,data:l,type:b.callback})}catch(q){b.errback&&d.send({target:a.source,data:q,type:b.errback})}}}}};b.extend(d,{defaults:{target:null,url:null,type:null,data:null,success:null,error:null,origin:"*",hash:!1}})})(this,"undefined"===typeof jQuery?null:jQuery);"JSON"in window&&window.JSON||(JSON={});
(function(){function a(a){return 10>a?"0"+a:a}function b(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var b=h[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,d){var e,h,n,p,r=f,o,j=d[a];j&&"object"===typeof j&&"function"===typeof j.toJSON&&(j=j.toJSON(a));"function"===typeof i&&(j=i.call(d,a,j));switch(typeof j){case "string":return b(j);case "number":return isFinite(j)?""+j:"null";case "boolean":case "null":return""+
j;case "object":if(!j)return"null";f+=g;o=[];if("[object Array]"===Object.prototype.toString.apply(j)){p=j.length;for(e=0;e<p;e+=1)o[e]=c(e,j)||"null";n=0===o.length?"[]":f?"[\n"+f+o.join(",\n"+f)+"\n"+r+"]":"["+o.join(",")+"]";f=r;return n}if(i&&"object"===typeof i){p=i.length;for(e=0;e<p;e+=1)h=i[e],"string"===typeof h&&(n=c(h,j))&&o.push(b(h)+(f?": ":":")+n)}else for(h in j)Object.hasOwnProperty.call(j,h)&&(n=c(h,j))&&o.push(b(h)+(f?": ":":")+n);n=0===o.length?"{}":f?"{\n"+f+o.join(",\n"+f)+"\n"+
r+"}":"{"+o.join(",")+"}";f=r;return n}}if("function"!==typeof Date.prototype.toJSON)Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z"},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,g,h={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},i;if("function"!==typeof JSON.stringify)JSON.stringify=function(a,b,d){var e;g=f="";if("number"===typeof d)for(e=0;e<d;e+=1)g+=" ";else"string"===typeof d&&(g=d);if((i=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return c("",
{"":a})};if("function"!==typeof JSON.parse)JSON.parse=function(a,b){function c(a,d){var e,f,g=a[d];if(g&&"object"===typeof g)for(e in g)Object.hasOwnProperty.call(g,e)&&(f=c(g,e),void 0!==f?g[e]=f:delete g[e]);return b.call(a,d,g)}var e;d.lastIndex=0;d.test(a)&&(a=a.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"===typeof b?c({"":e},""):e;throw new SyntaxError("JSON.parse");}})();MsgProtocol=function(){};
MsgProtocol.prototype={_interval_id:null,_last_hash:"",_cache_bust:1,postMessage:function(a,b,c){c=c||parent;if(b)c.location?c.location=b.replace(/#.*$/,"")+"#"+ +new Date+this._cache_bust++ +"&"+a:c.src=b.replace(/#.*$/,"")+"#"+ +new Date+this._cache_bust++ +"&"+a},receiveMessages:function(a,b){this._interval_id&&clearInterval(this._interval_id);this._interval_id=null;if(a)this._interval_id=setInterval(function(){var b=document.location.hash,d=/^#?\d+&/;if(b!==this._last_hash&&d.test(b))this._last_hash=
b,a({data:b.replace(d,"")})},b)},finishMessaging:function(){clearInterval(this._interval_id);this._interval_id=null}};"undefined"!=typeof EBG?EBG.msgProtocol=new MsgProtocol:EBG={msgProtocol:new MsgProtocol};
EBG.VideoInteraction={STARTED:"ebVideoStarted",PERCENT_25_PLAYED:"eb25Per_Played",PERCENT_50_PLAYED:"eb50Per_Played",PERCENT_75_PLAYED:"eb75Per_Played",FULLPLAY:"ebVideoFullPlay",MUTE:"ebVideoMute",UNMUTE:"ebVideoUnmute",PAUSE:"ebVideoPause",REPLAY:"ebVideoReplay",UNMUTED:"ebVideoUnmuted",FULLSCREEN_START:"ebFSStart",FULLSCREEN_END:"ebFSEnd",FULLSCREEN_MUTE:"ebFSVideoMute",FULLSCREEN_PAUSE:"ebFSVideoPause",SLIDER_DRAGGED:"ebSliderDragged",VIDEO_PLAY_DURATION:"ebVideoPlayDuration",VIDEO_ASSET_DURATION:"ebVideoAssetDuration",
FULLSCREEN_DURATION:"ebFSVideoPlayDuration",FULLSCREEN_ASSET_DURATION:"ebFSVideoAssetDuration"};
EBG.EBMessage={REQ_INIT:"reqInit",INIT:"ebInit",INITDONE:"ebInitDone",SHOW_DEFAULT_IMAGE:"ebShowDefaultImage",CLICKTHROUGH:"ebclickthrough",VERSION_TRACKING_IMPRESSION:"ebversiontrackingimpression",USER_ACTION_COUNTER:"ebCIUserActionCounter",AUTOMATIC_EVENT_COUNTER:"ebCIAutomaticEventCounter",START_TIMER:"ebCIStartTimer",UPDATE_TIMER:"ebUpdateTimer",STOP_TIMER:"ebCIStopTimer",START_VIDEO_TIMER:"ebStartVideoTimer",STOP_VIDEO_TIMER:"ebendvideotimer",VIDEO_INTERACTION:"ebVideoInteraction",VIDEO_LOAD:"ebVideoLoad",
INIT_VIDEO_LOADER:"ebInitVideoLoader",VIDEO_FS_OPEN:"ebVideoFSOpen",VIDEO_FS_CLOSE:"ebVideoFSClose",VIDEO_FS_AUTO_CLOSE:"ebVideoFSAutoClose",START_VIDEO:"ebtStartVideo",STOP_VIDEO:"ebtStoptVideo",UPDATE_VIDEO_DURATION:"ebtUpdateVideoDuration",INIT_EXPANSION_PARAMS:"ebInitExpansionParams",EXPAND:"ebExpandPanel",EXPAND_DONE:"ebExpandDone",COLLAPSE:"ebCollapsePanel",COLLAPSE_DONE:"ebCollapseDone"};EBG.DurationInteraction={TIMER:"Timer",AGGREGATE:"Aggregate"};
EBG.INNERIFRAMEMessage={LOADED:"ebInnerIframeLoaded",INIT:"ebInitInnerIframe",EBO:"ebO",GLOBALPARAMS:"ebGlobalParams",CONTINUE_SENDING:"ContinueSending",NOT_LASTMSG:"NotLastMsg",LASTMSG:"LastMsg",ADCONFIG_REQUEST:"AdConfig_Request",SECRET_TAGS:"Secret_Tags"};
EBG.FS={EB_VERSION_TRACKING_IMPRESSION:"ebversiontrackingimpression",EB_CLICKTHROUGH:"ebclickthrough",EB_CI_USER_ACTION_COUNTER:"ebciuseractioncounter",EB_CI_AUTOMATIC_EVENT_COUNTER:"ebciautomaticeventcounter",EB_VIDEO_INTERACTION:"ebvideointeraction",EB_START_TIMER:"ebstarttimer",EB_END_TIMER:"ebendtimer",EB_CI_START_TIMER:"ebcistarttimer",EB_CI_STOP_TIMER:"ebcistoptimer",EB_UPDATE_TIMER:"ebupdatetimer",EB_START_VIDEO_TIMER:"ebstartvideotimer",EB_STOP_VIDEO_TIMER:"ebendvideotimer",EB_PAGE_LOAD:"ebpageload",
EB_COMMAND:"ebcommand",EB_MSG:"ebmsg",EB_EXPAND_PANEL:"ebexpandpanel",EB_COLLAPSE_PANEL:"ebcollapsepanel",EB_SET_STATE:"ebsetstate",EB_RESET_STATE:"ebresetstate",EB_MOUSE_TRACKER:"ebmousetracker",EB_MOUSE_MOVE:"ebmousemove",EB_TEST_DC:"ebtestdc",EB_CLOSE_AD:"ebclosead",EB_REPLAY_AD:"ebreplayad",EB_REPLAY_EXP:"ebreplayexp",EB_LOAD_RICH_BANNER:"ebloadrichbanner",EB_SHOW_RICH_BANNER:"ebshowrichbanner",EB_INIT_VIDEO_LOADER:"ebinitvideoloader",EB_VIDEO_LOAD:"ebvideoload",EB_VIDEO_LOAD_AND_PLAY:"ebvideoloadandplay",
EB_FULL_SCREEN_OPEN:"ebfullscreenopen",EB_FULL_SCREEN_CLOSE:"ebfullscreenclose",EB_FULL_SCREEN_AUTO_CLOSE:"ebfullscreenautoclose",EB_VIDEO_FS_OPEN:"ebvideofsopen",EB_VIDEO_FS_CLOSE:"ebvideofsclose",EB_VIDEO_FS_AUTO_CLOSE:"ebvideofsautoclose",EB_START_VIDEO:"ebtstartvideo",EB_STOP_VIDEO:"ebtstopvideo",EB_UPDATE_VIDEO_DURATION:"ebtupdatevideoduration",EB_GET_JS_VAR:"ebgetjsvar",EB_GET_ALL_JS_VARS:"ebgetalljsvars",EB_SET_JS_VAR:"ebsetjsvar"};EBG.ActionType={USER:"user",AUTO:"auto"};
EBG.SingleExpInteractions={PANELS_VIEWED:"ebPanelsViewed",AUTO_SHOW:"autoshow",DURATION:"duration"};EBG.adTypes={RichBannerHtml5:"Html5Banner",SEBannerHtml5:"Html5SEBanner",StdBanner:"StdBanner",Banner:"Banner",SEBanner:"SEBanner",ExpBanner:"ExpBanner",VisibilityAd:"Visibility"};EBG.WindowTarget={BLANK:"_blank",SELF:"_self",PARENT:"_parent",TOP:"_top"};
EBG.Const={OUTER_DIV:"eyeDiv",DATACAPTURE:"/BurstingPipe/BurstingDataCapturePipe.asp",AKAMAIFCS_PLUID_9:"rtmp://flv.stream.atwola.com/flash/flv/mm",AKAMAIFCS_PLUID_43:"rtmp://eyeblaster.fcod.msecnd.net/vod/a10061/e1",AKAMAIFCS_PLUID_42_45:"rtmp://cp57388.edgefcs.net/ondemand",AKAMAI_DEFAULT:"rtmp://cp16207.edgefcs.net/ondemand",SHOW_HIDE_FLAG:"data-ebhidingoverlappingelement",SHOW_HIDE_BACKUP:"data-ebvisibilitybackup"};EBG.PanelPositionType={PAGE_RELATIVE_PERCENTAGE:0,BANNER_RELATIVE_PIXELS:1,PAGE_RELATIVE_PIXELS:2};
EBG.PanelCorner={TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_LEFT:3,BOTTOM_RIGHT:4};EBG.AnimationType={NONE:"none",LINEAR:"linear",EASE_OUT:"easeout",EASE_OUT_SNAP:"easeoutsnap"};EBG.ExpandCollapseMethod={SEBanner:"clip",ExpBanner:"resize"};
EBG.AnimationDefaults={easeOutCoefficient:0.1,stepTime:10,linearSteps:50,snapThreshold:10,animationType:EBG.AnimationType.NONE,snap:!1,checkShowHideOnEachStep:!1,hideAssetAfterExpand:!1,removeAssetAfterExpand:!1,hideAssetAfterCollapse:!0,removeAssetAfterCollapse:!0,method:EBG.ExpandCollapseMethod.ExpBanner,endAnimationHideAsset:!1,endAnimationRemoveAsset:!1};
EBG.AnimationPushDownDefaults={easeOutCoefficient:0.1,stepTime:50,linearSteps:20,snapThreshold:10,animationType:EBG.AnimationType.LINEAR,snap:!1,checkShowHideOnEachStep:!1,hideAssetAfterExpand:!1,removeAssetAfterExpand:!1,hideAssetAfterCollapse:!1,removeAssetAfterCollapse:!1,method:EBG.ExpandCollapseMethod.ExpBanner,endAnimationHideAsset:!1,endAnimationRemoveAsset:!1};EBG.ProtectedElementIds=["ebAd","eyeDiv","ebDefault","ebRich","ebDiv"];
EBG.VisibilityMode={DEFAULT_MODE:"defaultMode",BASIC_MODE:"basicMode",ENHANCED_MODE:"enhancedMode"};EBG.AcCertProgram={IAB_EU:0,NAI_US:1};EBG.AcIconPosition={TopRight:0,TopLeft:1,BottomRight:2,BottomLeft:3};EBG.declareNamespace("Events");EBG.Events.EventTiming={BEFORE:"BEFORE",ONTIME:"ONTIME",AFTER:"AFTER",ONTIME_AND_AFTER:"ONTIME_AND_AFTER"};
EBG.Events.EventNames={CREATE_AD:"CREATE_AD",CREATE_ADAPTOR:"CREATE_ADAPTOR",CREATE_INT_MGR:"CREATE_INT_MGR",CREATE_POSITIONING_HELPER:"CREATE_POSITIONING_HELPER",SHOW_AD:"SHOW_AD",ADD_CREATIVES:"ADD_CREATIVES",ADD_INTERACTION:"ADD_INTERACTION",ADD_BANNER_DEFAULT_IMAGE_CREATIVE:"ADD_BANNER_DEFAULT_IMAGE_CREATIVE",ADD_BANNER_PRELOAD_IMAGE_CREATIVE:"ADD_BANNER_PRELOAD_IMAGE_CREATIVE",ADD_BANNER_DEFAULT_FLASH_CREATIVE:"ADD_BANNER_DEFAULT_FLASH_CREATIVE",ADD_BANNER_RICH_FLASH_CREATIVE:"ADD_BANNER_RICH_FLASH_CREATIVE",
ADD_PANEL_RICH_FLASH_CREATIVE:"ADD_PANEL_RICH_FLASH_CREATIVE",SHOW_BANNER_RICH_FLASH_CREATIVE:"SHOW_BANNER_RICH_FLASH_CREATIVE",SHOW_PANEL_RICH_FLASH_CREATIVE:"SHOW_PANEL_RICH_FLASH_CREATIVE",PAGE_LOAD:"PAGE_LOAD",COLLECT_TIMERS:"COLLECT_TIMERS",PAGE_UNLOAD:"PAGE_UNLOAD",PAGE_BEFORE_UNLOAD:"PAGE_BEFORE_UNLOAD",PAGE_HIDE:"PAGE_HIDE",PAGE_RESIZE:"PAGE_RESIZE",PAGE_SCROLL:"PAGE_SCROLL",PAGE_FOCUS:"PAGE_FOCUS",PAGE_BLUR:"PAGE_BLUR",PAGE_HIDDEN:"PAGE_HIDDEN",PAGE_VISIBLE:"PAGE_VISIBLE",INTERACTION_REPORT_REMOTE_SERVERS:"INTERACTION_REPORT_REMOTE_SERVERS",
START_TIMER:"START_TIMER",STOP_TIMER:"STOP_TIMER",UPDATE_TIMER:"UPDATE_TIMER",HANDLE_COUNTER_INTERACTION:"HANDLE_COUNTER_INTERACTION",DEFAULT_CLICK:"DEFAULT_CLICK",EXPAND:"EXPAND",COLLAPSE:"COLLAPSE",USER_INTERACTION:"USER_INTERACTION",MOUSE_OVER:"MOUSE_OVER",MOUSE_OUT:"MOUSE_OUT",MOUSE_MOVE:"MOUSE_MOVE",USER_INITIATED_VIDEO:"USER_INITIATED_VIDEO",DWELL_UNIQUE:"DWELL_UNIQUE",DWELL_VIDEO_START:"DWELL_VIDEO_START",DWELL_VIDEO_STOP:"DWELL_VIDEO_STOP",CREATIVE_CONTAINER_READY:"CREATIVE_CONTAINER_READY",
RICH_FLASH_PLAYED:"RICH_FLASH_PLAYED",REPLAY_AD:"REPLAY_AD",BANDWITH_DETECTED:"BANDWITH_DETECTED",FULL_SCREEN_START:"FULL_SCREEN_START",FULL_SCREEN_END:"FULL_SCREEN_STOP",ANIMATE_PANEL:"ANIMATE_PANEL",CLOSE_AD:"CLOSE_AD",OPEN_PAGE:"OPEN_PAGE"};EBG.Events.EbEventNames={PAGE_LOAD:EBG.Events.EventNames.PAGE_LOAD};EBG.Events.EventSubscription=function(a,b,c){this.eventName=a;this.callback=b;this.callbackBinding=c?c:null};
EBG.Events.EventSubscription.prototype={dispatcherFilters:null,timing:EBG.Events.EventTiming.ONTIME,isElementEvent:!1,elementId:"",isDocumentEvent:!1,isValid:function(){return EBG.isFunc(this.callback)&&(!this.callbackBinding||EBG.isObj(this.callbackBinding))},toString:function(){return EBG.format("EventSubscription: eventName={0}, timing={1}, callback={2}, callbackBinding={3}, dispatcherFilters={4}",this.eventName,this.timing,EBG.typeOf(this.callback),EBG.typeOf(this.callbackBinding),EBG.typeOf(this.dispatcherFilters))}};
EBG.declareClass(EBG.Events.EventSubscription,null);EBG.Events.Event=function(a){this.name=a;this.creationTime=+new Date};EBG.Events.Event.prototype={dispatcher:null,eventData:null,timing:null,toString:function(){return EBG.format("Event: name={0}, creationTime={1}, dispatcher={2}, eventData={3}",this.name,this.creationTime,EBG.typeOf(this.dispatcher),EBG.typeOf(this.eventData))}};EBG.declareClass(EBG.Events.Event,null);EBG.Events.EventManager=function(){this._subscriptions={}};
EBG.Events.EventManager.prototype={_subscriptions:{},subscribeToEvent:function(a){if(a.isValid())if(a.isElementEvent)EBG.adaptor&&EBG.adaptor.subscribeToEventOnElement(a.eventName,a.elementId,a.callback);else{var b=this._subscriptions[a.eventName]=this._subscriptions[a.eventName]||{},c;for(c in EBG.Events.EventTiming)EBG.Events.EventTiming.hasOwnProperty(c)&&(b[c]=b[c]||[]);b[a.timing].push(a);EBG.adaptor&&EBG.adaptor.hasEvent(a.eventName)&&EBG.adaptor.subscribeToEvent(a.eventName,a.isDocumentEvent)}},
dispatchEvent:function(a){var b=!1;switch(a.timing){case EBG.Events.EventTiming.BEFORE:case EBG.Events.EventTiming.ONTIME:case EBG.Events.EventTiming.AFTER:b=this._dispatchEventByTiming(a,a.timing);break;case EBG.Events.EventTiming.ONTIME_AND_AFTER:b=(b=this._dispatchEventByTiming(a,EBG.Events.EventTiming.ONTIME))||this._dispatchEventByTiming(a,EBG.Events.EventTiming.AFTER);break;default:b=(b=(b=this._dispatchEventByTiming(a,EBG.Events.EventTiming.BEFORE))||this._dispatchEventByTiming(a,EBG.Events.EventTiming.ONTIME))||
this._dispatchEventByTiming(a,EBG.Events.EventTiming.AFTER)}return b},attachToAdaptor:function(){EBG.adaptor.setListener(this.dispatchEvent,this)},_dispatchEventByTiming:function(a,b){var c=this._subscriptions[a.name];if(!c)return!1;for(var c=c[b],d=!1,e=0;e<c.length;e++){var f=this._dispatchEventToSubscription(a,c[e]);if(EBG.isBool(f)&&!f){d=!0;break}}return d},_dispatchEventToSubscription:function(a,b){var c=b.dispatcherFilters;if(EBG.isObj(c))for(var d in c)if(c.hasOwnProperty(d)){var e=c[d],f=
!0,g=d.split("."),h=a.dispatcher;if(h)for(var i=0;i<g.length;i++){var h=h[g[i]],k=i==g.length-1;if(!h||k&&h!==e){f=!1;break}}if(!f)return null}c=null;d=b.callback;if(EBG.isFunc(d)){e=[a];try{c=d.apply(b.callbackBinding,e)}catch(m){}}return c}};EBG.declareClass(EBG.Events.EventManager,null);EBG.eventMgr=EBG.eventMgr||new EBG.Events.EventManager;EBG.declareNamespace("Adaptors");EBG.Adaptors.TagNames={DIV:"div",IFRAME:"iframe",IMG:"img",SCRIPT:"script",OBJECT:"object",EMBED:"embed",SPAN:"span",A:"a"};
EBG.Adaptors.InjectionMethod={APPEND:"append",INSERT_BEFORE:"insertBefore"};EBG.Adaptors.WindowProp={top:"top",left:"left",location:"location",menubar:"menubar",width:"width",height:"height"};EBG.Adaptors.MoreSupportedEvent={visibilitychange:1,mozvisibilitychange:1,msvisibilitychange:1,webkitvisibilitychange:1};EBG.Adaptors.StdWebAdaptor=function(){this._setEvents()};EBG.Adaptors.StdWebAdaptor.onEnvEvent=function(){EBG.adaptor._handleEvent.apply(EBG.adaptor,arguments)};
EBG.Adaptors.StdWebAdaptor.prototype={_environmentEvents:{},_logicalEvents:{},_subscribedEvents:{},_subscribedEventsOnElement:[],_listener:null,_listenerBinding:null,initInnerModules:function(a,b,c){if(!this.browser)this.browser=new EBG.Adaptors.Browser(a,b,c);if(!this.flash)this.flash=EBG.Adaptors.FlashDetector?new EBG.Adaptors.FlashDetector:null},copy:function(a){for(var b in this._subscribedEvents)this._subscribedEvents.hasOwnProperty(b)&&(this._removeEventListener(window,this._environmentEvents[b].name,
EBG.Adaptors.StdWebAdaptor.onEnvEvent),a.subscribeToEvent(b));for(b=0;b<this._subscribedEventsOnElement.length;b++){var c=this._subscribedEventsOnElement[b],d=c.elementId,e=c.eventName,c=c.callback,f=this.getElementById(d);f&&(this._removeEventListener(f,e,c),a.subscribeToEventOnElement(e,d,c))}},intMonitorExist:function(){return EBG.isPreview&&top.ebHandleFsCommandsPrev},notifyIntMonitor:function(a){top.ebHandleFsCommandsPrev(a.command,a.args,a.objName,a.adId)},hasEvent:function(a){return!!this._environmentEvents[a]},
generateElementId:function(a,b){return EBG.format("eb{0}_{1}",a,b)},_getTags:function(a,b){EBG.isGlobalDef("JSON");var c="";if(b&&a.tagName==EBG.Adaptors.TagNames.SCRIPT&&a.text&&!a.attributes)b.push(a);else{c="";a.attributes&&(this._setObjDefaultAttributes(a),c=this._getObjAttributesStr(a));c=EBG.format("<{0} {1}>",a.tagName,c);a.innerHTML&&(c+=a.innerHTML);a.text&&(c+=a.text);a.params&&(c+=this._getObjParamsStr(a));if(a.children)for(var d=0;d<a.children.length;d++)c+=this._getTags(a.children[d],
b);c+=EBG.format("</{0}>",a.tagName)}return c},writeReportingIFrame:function(a,b,c){this.inject({tagName:EBG.Adaptors.TagNames.IFRAME,attributes:{id:a,src:b,style:{width:"0px",height:"0px"},frameborder:0}},EBG.Adaptors.InjectionMethod.APPEND,this.getElementById(c))},writeScript:function(a,b,c){try{this.inject({tagName:EBG.Adaptors.TagNames.SCRIPT,attributes:{id:a,name:a,src:b}},EBG.Adaptors.InjectionMethod.APPEND,this.getElementById(c))}catch(d){}},write:function(a){this._documentWrite(this._getTags(a))},
inject:function(a,b,c){var d=c.ownerDocument.createElement(a.tagName);if(a.attributes){this._setObjDefaultAttributes(a);for(var e in a.attributes)EBG.isObj(a.attributes[e])?this.setStyleToElem(d,a.attributes[e]):d.setAttribute(e,a.attributes[e])}switch(b){case EBG.Adaptors.InjectionMethod.INSERT_BEFORE:c.parentNode.insertBefore(d,c);break;default:c.appendChild(d)}e="";if(a.innerHTML)e=a.innerHTML;var f=[];if(a.children)for(var g=0;g<a.children.length;g++)e+=EBG.adaptor._getTags(a.children[g],f);if(e)d.innerHTML=
e;if(a.text)d.text=a.text;for(g=0;g<f.length;g++)this.inject(f[g],b,c)},addInlineDOM:function(a,b){this.inject(a,EBG.Adaptors.InjectionMethod.APPEND,this.getElementById(b))},setInnerHtml:function(a,b){a.innerHTML=b},setStyleToElem:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a.style[c]=b[c])},getStyleOfElem:function(a){if(a)return a.style},setListener:function(a,b){this._listener=a;this._listenerBinding=b},subscribeToEvent:function(a,b){if(this.hasEvent(a)&&!this._subscribedEvents[a]){var c=
this._environmentEvents[a],d=c.inCurWin?window:this.getPageWin();if(b)d=d.document;this._addEventListener(d,c.name,EBG.Adaptors.StdWebAdaptor.onEnvEvent);this._subscribedEvents[a]={}}},subscribeToEventOnElement:function(a,b,c){var d=!1,e="string"==typeof b?this.getDisplayWin().document.getElementById(b):b;e||(d=!0);for(var f=this._subscribedEventsOnElement.length,g=0;g<f;g++)if(this._subscribedEventsOnElement[g].elementId==b&&this._subscribedEventsOnElement[g].eventName==a){d=!0;break}d||(this._addEventListener(e,
a,c),this._subscribedEventsOnElement[f]={elementId:b,eventName:a,callback:c})},_addEventListener:function(a,b,c){"load"==b&&this.isPageLoaded()?setTimeout(function(){c({type:"load"})},5):window.addEventListener?a.addEventListener(b,c,!1):window.attachEvent&&a.attachEvent("on"+b,c)},_removeEventListener:function(a,b,c){window.removeEventListener?a.removeEventListener(b,c,!1):window.detachEvent&&a.detachEvent("on"+b,c)},_checkIfPropExist:function(a,b){return a&&0<=a?EBG.format(", {0}={1}",b,a):""},
openPage:function(a,b){var c=EBG.WindowTarget.BLANK,d="titlebar=1,resizable=1,scrollbars=1,directories=0,toolbar=1,status=1";if(b)c=b.target,d+=this._checkIfPropExist(b.yPos,EBG.Adaptors.WindowProp.top),d+=this._checkIfPropExist(b.xPos,EBG.Adaptors.WindowProp.left),d+=this._checkIfPropExist(b.showAddressBar,EBG.Adaptors.WindowProp.location),d+=this._checkIfPropExist(b.showMenuBar,EBG.Adaptors.WindowProp.menubar),d+=this._checkIfPropExist(b.width,EBG.Adaptors.WindowProp.width),d+=this._checkIfPropExist(b.height,
EBG.Adaptors.WindowProp.height);window.open(a,c,d)},reportToRemoteServerUsingImage:function(a){this.ReportingImg=new Image;this.ReportingImg.src=a},reportToRemoteServer:function(a,b){if(a){var b=EBG.isBool(b)?b:!0,c=!1;try{if(this._isXMLHttpRequestSupported()){var d=new XMLHttpRequest;if(void 0!==d.withCredentials){d.open("GET",a,b);try{d.send()}catch(e){if(b)throw e;}c=!0}else c=!1}else if(window.XDomainRequest){var f=new XDomainRequest;f.open("GET",a);f.send();c=!0}}catch(g){c=!1}c||this.reportToRemoteServerUsingImage(a)}},
getElementById:function(a,b){b=b?b:this.getDisplayWin();return b.document.getElementById(a)},supportsPageLoadEvents:function(){return!this.browser.isOpera()&&!(this.browser.isIE()&&7>this.browser.getVersion())},getHostName:function(a){return(a?a:this.getDisplayWin()).location.hostname},getDisplayWin:function(){return window},getPageWin:function(){return window},inInnerIframe:function(){return!1},inPlacementIframe:function(){return!1},_setEvents:function(){this.supportsPageLoadEvents&&(this._setEvent(EBG.Events.EventNames.PAGE_LOAD,
"load"),this._setEvent(EBG.Events.EventNames.PAGE_UNLOAD,"unload",!0),this._setEvent(EBG.Events.EventNames.PAGE_BEFORE_UNLOAD,"beforeunload",!0),this._setEvent(EBG.Events.EventNames.PAGE_HIDE,"pagehide",!0));this._setEvent(EBG.Events.EventNames.PAGE_RESIZE,"resize")},_setEvent:function(a,b,c){this._environmentEvents[a]={name:b,inCurWin:c?c:!1};this._logicalEvents[b]=a},_documentWrite:function(a){document.write(a)},_isXMLHttpRequestSupported:function(){var a=window.XMLHttpRequest?new XMLHttpRequest:
null;return a&&EBG.isBool(a.withCredentials)},isPageLoaded:function(){if(this._isPageLoaded)return!0;this._isPageLoaded=EBGInfra.isDefined(window.gEBMainWindow)&&EBGInfra.isDefined(gEBMainWindow.downloadMgr)&&gEBMainWindow.isPageLoaded||EBGInfra.isDefined(this._isPageLoaded)?!0:!1;if(!this._isPageLoaded&&this.getDisplayWin().document.readyState)this._isPageLoaded="complete"==this.getDisplayWin().document.readyState;return EBG.adaptor._isPageLoaded},_handleEvent:function(a){a=this._logicalEvents[a.type];
switch(a){case EBG.Events.EventNames.PAGE_LOAD:this._isPageLoaded=!0;break;case EBG.Events.EventNames.PAGE_RESIZE:EBG.adaptor.inInnerIframe()&&this.serving.rehidePlacementIframe()}a&&(a=new EBG.Events.Event(a),EBG.isFunc(this._listener)&&this._listener.call(this._listenerBinding,a))},_getDefaultAttributes:function(a){var b={};switch(a.toLowerCase()){case EBG.Adaptors.TagNames.IFRAME:b={marginheight:"0px",marginwidth:"0px",frameborder:"0",scrolling:"no"}}return b},_getDefaultStyle:function(a){var b=
{border:"0px",padding:"0px",margin:"0px"};switch(a.toLowerCase()){case EBG.Adaptors.TagNames.DIV:EBG.mergeObj({top:"0px",left:"0px",overflow:"visible",fontSize:"0px",lineHeight:"0px",textAlign:"left"},b,!0)}return b},_setObjDefaultAttributes:function(a){var b=this._getDefaultAttributes(a.tagName);EBG.mergeObj(a.attributes,b,!0);b.style=this._getDefaultStyle(a.tagName);a.attributes.style&&EBG.mergeObj(a.attributes.style,b.style,!0);a.attributes=b},_getObjParamsStr:function(a){var a=a.params,b="",c;
for(c in a)a.hasOwnProperty(c)&&(b+=EBG.format("<PARAM name='{0}' value='{1}'>",c,a[c]));return b},_getObjAttributesStr:function(a){var a=a.attributes,b="",c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(EBG.isObj(d)){var e=d,d="",f;for(f in e)if(e.hasOwnProperty(f)){var g=e[f];"textAlign"==f&&(f="text-align");d+=EBG.format("{0}:{1}; ",f,g)}}if(d)try{d=d.toString().replace(/\"/ig,"&quot;"),b+=EBG.format(' {0}="{1}"',c,d)}catch(h){}}return b},handleEvent:function(a){this._handleEvent(a)},setElemStyle:function(a,
b,c){a.style[b]=c},getBrowserLanguage:function(){var a="en-US";if("undefined"!==typeof navigator.language)a=navigator.language;else if("undefined"!==typeof navigator.userLanguage)a=navigator.userLanguage;return a},getPositioningById:function(a,b){return this.getPositioningByElement(this.getElementById(a),b)},getPositioningByElement:function(a,b){var c=a&&a.getBoundingClientRect?a.getBoundingClientRect():null;if(!c)return null;var d=this.getScrollLeftTop(b);return{X:Math.floor(c.left)+d.X,Y:Math.floor(c.top)+
d.Y}},getScrollLeftTop:function(a){var a=this._getCurrentWindow(a),b=a.document,c={X:{"0":"XOffset",1:"Left"},Y:{"0":"YOffset",1:"Top"}},d;for(d in c)c[d]=a["page"+c[d][0]]||(b.documentElement?b.documentElement["scroll"+c[d][1]]:b.documentElement["page"+c[d][0]])||(b.body?b.body["scroll"+c[d][1]]:0);return c},_getCurrentWindow:function(a){try{return a?this.getDisplayWin():top}catch(b){}},removeElement:function(a){if(a=this.getElementById(a))a.parentNode.removeChild(a),a.removeNode&&a.removeNode(!0)},
appendChildElement:function(a,b){a&&b&&this.getElementById(a).appendChild(b)},getMaxZIndex:function(a){var b=0;if(a){var c=this.getStyleOfElem(a);c&&c.zIndex&&(b=c.zIndex);for(var d in a.childNodes)d&&a.childNodes[d]&&(c=this.getMaxZIndex(a.childNodes[d]),b=b>c?b:c)}return b}};EBG.declareClass(EBG.Adaptors.StdWebAdaptor,null);EBG.Adaptors.WebAdaptor=function(){EBG.callSuperConstructor(EBG.Adaptors.WebAdaptor,this);EBG.adaptor&&EBG.adaptor.copy(this)};
EBG.Adaptors.WebAdaptor.prototype={scrollBarWidth:0,initInnerModules:function(a,b,c){EBG.callSuperFunction(EBG.Adaptors.WebAdaptor,this,"initInnerModules",[a,b,c]);this.scrollBarWidth=this.getScrollerWidth();if(!this.serving)this.serving=EBG.Adaptors.ServingMgr?new EBG.Adaptors.ServingMgr:null},_setEvents:function(){EBG.callSuperFunction(EBG.Adaptors.WebAdaptor,this,"_setEvents",[]);this._setEvent(EBG.Events.EventNames.PAGE_SCROLL,"scroll");this._setEvent(EBG.Events.EventNames.PAGE_FOCUS,"focus");
this._setEvent(EBG.Events.EventNames.PAGE_BLUR,"blur");var a=this._getVisibilityEventName();"undefined"===typeof document.addEventListener||"undefined"===typeof a||(this._setEvent(EBG.Events.EventNames.PAGE_HIDDEN,a,!0),this._setEvent(EBG.Events.EventNames.PAGE_VISIBLE,a,!0));this._setEvent(EBG.Events.EventNames.MOUSE_MOVE,"mousemove")},initServingMode:function(a,b){b=b?b:!1;switch(a){case EBG.Adaptors.ServingMode.INNER_IFRAME:this.serving.setServingMode(EBG.Adaptors.ServingMode.INNER_IFRAME);break;
case -1:this.serving.detectServingMode();break;case 0:this.serving.isFIF()&&!b?this.serving.setServingMode(EBG.Adaptors.ServingMode.FRIENDLY_IFRAME):b&&this.serving.setServingMode(EBG.Adaptors.ServingMode.SCRIPT);break;case 1:case 2:this.serving.setServingMode(EBG.Adaptors.ServingMode.IFRAME)}},addInlineDOM:function(a,b){this.inject(a,EBG.Adaptors.InjectionMethod.APPEND,this.getElementById(b))},addPlaceHolder:function(a){this.inInnerIframe()&&(this.inject(a,EBG.Adaptors.InjectionMethod.INSERT_BEFORE,
this.serving.placementIframe),this.serving.hidePlacementIframe())},getPageWin:function(){return this.serving&&this.serving.pageWin?this.serving.pageWin:window},getDisplayWin:function(){return this.serving&&this.serving.displayWin?this.serving.displayWin:window},_getDocument:function(){return this.getDisplayWin().document},inInnerIframe:function(){return this.serving&&this.serving.placementIframe},inPlacementIframe:function(){return this.serving&&this.serving.servingMode===EBG.Adaptors.ServingMode.IFRAME},
setElemStyle:function(a,b,c){a.style[b]=c},setElemAttribute:function(a,b,c){a[b]=c},getClipTag:function(a,b,c,d){return EBG.format("rect({0}px {1}px {2}px {3}px)",a,b,c,d)},clip:function(a,b,c,d,e){a.style.clip=this.getClipTag(b,c,d,e)},unclip:function(a){a.style.clip="rect(auto auto auto auto)"},expand:function(a,b){this.setElemStyle(a,"left",EBG.px(-b.x));this.setElemStyle(a,"top",EBG.px(-b.y));this.setElemAttribute(a,"width",b.width);this.setElemAttribute(a,"height",b.height);this.unclip(a)},collapse:function(a,
b,c){b=this.getClipParams(b,c);this.clip(a,b.top,b.right,b.bottom,b.left)},getClipParams:function(a,b){return{top:a.y,right:a.x+b.width,bottom:a.y+b.height,left:a.x}},getCurrentStyleAttr:function(a,b){var c=null;try{c=a.currentStyle?a.currentStyle[b]:a.ownerDocument.defaultView.getComputedStyle(a,null).getPropertyValue(b)}catch(d){}if(!c&&"embed"==a.tagName.toLowerCase()&&a.parentNode&&"object"==a.parentNode.tagName.toLowerCase())a=a.parentNode,c=a.currentStyle?a.currentStyle[b]:a.ownerDocument.defaultView.getComputedStyle(a,
null).getPropertyValue(b);return c},getViewPortMetrics:function(a){try{var b=this._getCurrentWindow(a),c=b.document,a={Height:0,Width:0},d=c.documentMode;if(this.browser.isIE()&&(5==d||!this.browser.isStrictType(c)))a.Width=c.body.clientWidth,a.Height=c.body.clientHeight;else if(this.browser.isIE())a.Width=c.documentElement.clientWidth,a.Height=c.documentElement.clientHeight;else{a.Width=b.innerWidth;a.Height=b.innerHeight;if(c.body.offsetWidth>a.Width||c.body.scrollWidth>a.Width||0<b.scrollMaxX)a.Height-=
this.scrollBarWidth;if(c.body.offsetHeight>a.Height||c.body.scrollHeight>a.Height||0<b.scrollMaxY)a.Width-=this.scrollBarWidth}return a}catch(e){}},_getCurrentWindow:function(a){try{return(a=this.serving.servingMode==EBG.Adaptors.ServingMode.INNER_IFRAME?!0:a)?this.getDisplayWin():top}catch(b){}},getPositioningById:function(a,b){b=this.serving.servingMode==EBG.Adaptors.ServingMode.INNER_IFRAME?!0:b;return this.getPositioningByElement(this.getElementById(a),b)},getPositioningByElement:function(a,b){var b=
this.serving.servingMode==EBG.Adaptors.ServingMode.INNER_IFRAME?!0:b,c=a&&a.getBoundingClientRect?a.getBoundingClientRect():this._calculatePositioning(a);if(!c)return null;var d=this.getScrollLeftTop(b);return{X:Math.floor(c.left)+d.X,Y:Math.floor(c.top)+d.Y}},_calculatePositioning:function(){return null},getScrollerWidth:function(){try{if(EBG.adaptor.browser._platform==EBG.adaptor.browser._platformTypes.IPAD||EBG.adaptor.browser._platform==EBG.adaptor.browser._platformTypes.IPHONE)return 0;var a=
null,b=null,c=0,d=0,e=0,a=document.createElement("div");a.style.position="absolute";a.style.top="-1000px";a.style.left="-1000px";a.style.width="100px";a.style.height="50px";a.style.overflow="auto";b=document.createElement("div");b.style.width="100%";b.style.height="200px";a.appendChild(b);document.body.appendChild(a);d=b.offsetWidth;document.body.removeChild(document.body.lastChild);a.style.overflow="hidden";document.body.appendChild(a);c=b.offsetWidth;document.body.removeChild(document.body.lastChild);
return c-d?c-d:0}catch(f){}},getResolution:function(){var a=0;switch(window.screen.width){case 640:a=1;break;case 800:a=2;break;case 1024:a=4;break;case 1152:a=8;break;case 1280:a=16;break;case 1600:a=32;break;case 1400:a=64;break;case 1920:a=128;break;case 1680:a=256;break;case 1366:a=512;break;case 1440:a=1024;break;case 1360:a=2048;break;case 768:a=4096;break;case 1093:a=8192;break;case 960:a=16384;break;case 2560:a=32768}return a},_handleEvent:function(a){var b=this._logicalEvents[a.type];switch(b){case EBG.Events.EventNames.PAGE_HIDDEN:case EBG.Events.EventNames.PAGE_VISIBLE:b=
this.isPageVisible()?EBG.Events.EventNames.PAGE_VISIBLE:EBG.Events.EventNames.PAGE_HIDDEN;break;default:EBG.callSuperFunction(EBG.Adaptors.WebAdaptor,this,"_handleEvent",[a]);return}b&&(a=new EBG.Events.Event(b),EBG.isFunc(this._listener)&&this._listener.call(this._listenerBinding,a))},isPageVisible:function(){var a=!0;return a=(a=this._getVisibilityEventHidden())&&document[a]?!1:!0},_getVisibilityEventHidden:function(){var a=null;"undefined"!==typeof document.hidden?a="hidden":"undefined"!==typeof document.mozHidden?
a="mozHidden":"undefined"!==typeof document.msHidden?a="msHidden":"undefined"!==typeof document.webkitHidden&&(a="webkitHidden");return a},_getVisibilityEventName:function(){var a=null;"undefined"!==typeof document.hidden?a="visibilitychange":"undefined"!==typeof document.mozHidden?a="mozvisibilitychange":"undefined"!==typeof document.msHidden?a="msvisibilitychange":"undefined"!==typeof document.webkitHidden&&(a="webkitvisibilitychange");return a}};EBG.declareClass(EBG.Adaptors.WebAdaptor,EBG.Adaptors.StdWebAdaptor);
EBG.Adaptors.Browser=function(a,b,c){this.set(a,b,c)};
EBG.Adaptors.Browser.prototype={_platform:0,_browserType:0,_browserVer:0,_browserTypes:{NON_SUPPORTED:0,IE:1,FF:2,NN:3,SAFARI:4,CHROME:5,AOL:6,OPERA:7},_platformTypes:{NON_SUPPORTED:0,WIN_95:1,WIN_98:2,WIN_2000:3,WIN_XP:4,WIN_ME:5,WIN_NT:6,MAC:7,WIN_VISTA:8,WIN_7:9,IPHONE:10,IPAD:11,IPOD:12,ANDROID_2_TAB:13,ANDROID_3_TAB:14,BLACKBARRY_5:15,WIN_MOBILE_7:16,ANDROID_2_MOBILE:17,ANDROID_3_MOBILE:18},set:function(a,b,c){a=a?a:this._platformTypes.NON_SUPPORTED;b=b?b:this._browserTypes.NON_SUPPORTED;this._platform=
a;this._browserType=b;this._browserVer=c?c:0},getVersion:function(){return this._browserVer},isIE:function(){return this._browserType==this._browserTypes.IE||this._browserType==this._browserTypes.AOL},isStrictType:function(a){var b=!1;this.isIE()&&(b=a?"CSS1Compat"==a.compatMode:"CSS1Compat"==document.compatMode);return b},isFF:function(){return this._browserType==this._browserTypes.FF},isSafari:function(){return this._browserType==this._browserTypes.SAFARI},isChrome:function(){return this._browserType==
this._browserTypes.CHROME},isOpera:function(){return this._browserType==this._browserTypes.OPERA},isMac:function(){return this._platform==this._platformTypes.MAC}};EBG.Adaptors.ServingMode={SCRIPT:"SCRIPT",IFRAME:"IFRAME",FRIENDLY_IFRAME:"FRIENDLY_IFRAME",INNER_IFRAME:"INNER_IFRAME"};EBG.Adaptors.ServingMgr=function(){this.displayWin=window;this.servingMode=EBG.Adaptors.ServingMode.SCRIPT;this._supportPostMessage=window.postMessage?!0:!1};
EBG.Adaptors.ServingMgr.prototype={displayWin:null,pageWin:null,placementIframe:null,_placementIframeAttr:null,servingMode:null,ebO:null,addinEyeRef:null,setDisplayWin:function(a){this.displayWin=a},setPageWin:function(){var a=this.detectServingMode(!0);switch(this.servingMode){case EBG.Adaptors.ServingMode.SCRIPT:switch(a){case EBG.Adaptors.ServingMode.SCRIPT:this.pageWin=window;break;case EBG.Adaptors.ServingMode.FRIENDLY_IFRAME:this.pageWin=top;break;case EBG.Adaptors.ServingMode.IFRAME:case EBG.Adaptors.ServingMode.INNER_IFRAME:this.pageWin=
this.displayWin}break;case EBG.Adaptors.ServingMode.FRIENDLY_IFRAME:this.pageWin=top;break;case EBG.Adaptors.ServingMode.IFRAME:case EBG.Adaptors.ServingMode.INNER_IFRAME:this.pageWin=this.displayWin}},setServingMode:function(a,b){this.servingMode=a;b=null;switch(a){case EBG.Adaptors.ServingMode.INNER_IFRAME:b=parent.parent;break;case EBG.Adaptors.ServingMode.FRIENDLY_IFRAME:b=top;break;case EBG.Adaptors.ServingMode.SCRIPT:this.setDisplayWin(window);this.setPageWin();return}EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_UNLOAD,
this._restorePlacementIframe,this));b&&(EBG.isGlobalDef("gstrEbDisplayPos")&&(b=eval("parent."+gstrEbDisplayPos)),this.setDisplayWin(b),this.setPageWin(),this._findPlacementIframe())},isFIF:function(){return EBG.isGlobalDef("inDapIF",!0)||EBG.isGlobalDef("inFIF",!0)},detectServingMode:function(a){try{var b=EBG.Adaptors.ServingMode.SCRIPT;if(window!==parent){var c=null;try{c=EBG.adaptor.getHostName(parent)}catch(d){}b=this.isFIF()||EBG.adaptor.getHostName(window)===c?EBG.Adaptors.ServingMode.FRIENDLY_IFRAME:
EBG.Adaptors.ServingMode.IFRAME;if(a)return b;this.setServingMode(b)}else return b}catch(e){}},_restorePlacementIframe:function(){this._placementIframeAttr&&(EBGInfra.mergeObj(this._placementIframeAttr,this.placementIframe,!0),EBGInfra.mergeObj(this._placementIframeAttr.style,this.placementIframe.style,!0))},hidePlacementIframe:function(){var a=this.placementIframe;if(!this._placementIframeAttr)this._placementIframeAttr={width:a.width,height:a.height},this._placementIframeAttr.style={width:EBG.adaptor.getCurrentStyleAttr(a,
"width"),height:EBG.adaptor.getCurrentStyleAttr(a,"height"),visibility:EBG.adaptor.getCurrentStyleAttr(a,"visibility"),border:EBG.adaptor.getCurrentStyleAttr(a,"border")};a.style.visibility="hidden";a.width=a.height=0;a.style.width=a.style.height=a.style.border="0px"},rehidePlacementIframe:function(){this._placementIframeAttr&&this.hidePlacementIframe()},insertInnerIframe:function(a){this._supportPostMessage?this.listenToMessages():this._startHashProtocol();var b={tagName:EBG.Adaptors.TagNames.IFRAME,
attributes:{id:"addineyeIframe",src:this._getAddineyeLocation(),width:"0",height:"0"}};EBG.adaptor.addInlineDOM(b,a);this.addinEyeRef=EBG.adaptor.getElementById("addineyeIframe");this._supportPostMessage||this._sendMessageHashProtocol()},_getAddineyeLocation:function(){var a="eyeblaster/addineyeV2"+("https://"==EBG.protocol?"-secure":"")+".html";if("undefined"!=typeof EBG.iframeLocation&&""!=EBG.iframeLocation)a=EBG.iframeLocation;if("http"!=a.substr(0,4)){var b=this._ebGetHostName(document.referrer);
if(""==b)return"";a=EBG.protocol+b+"/"+a}return a},_buildSecretTagsObj:function(){return{gstrEbPreLoadScripts:EBG.isGlobalDef("gstrEbPreLoadScripts")?gstrEbPreLoadScripts:void 0,gnEbLowBWLimit:EBG.isGlobalDef("gnEbLowBWLimit")?gnEbLowBWLimit:void 0,gstrEbPreLoadScripts:EBG.isGlobalDef("gstrEbPreLoadScripts")?gstrEbPreLoadScripts:void 0,gfEbInlineBanner:EBG.isGlobalDef("gfEbInlineBanner")?gfEbInlineBanner:void 0,gEbEyeDivRefElement:EBG.isGlobalDef("gEbEyeDivRefElement")?gEbEyeDivRefElement:void 0,
gstrEbDisplayPos:EBG.isGlobalDef("gstrEbDisplayPos")?gstrEbDisplayPos:void 0,gnEbMinZIndex:EBG.isGlobalDef("gnEbMinZIndex")?gnEbMinZIndex:void 0,gfEbForceStreaming:EBG.isGlobalDef("gfEbForceStreaming")?gfEbForceStreaming:void 0,gfEbUseIntFlash:EBG.isGlobalDef("gfEbUseIntFlash")?gfEbUseIntFlash:void 0,gEbfLoadAsAS2:EBG.isGlobalDef("gEbfLoadAsAS2")?gEbfLoadAsAS2:void 0,gEbURLTokens:EBG.isGlobalDef("gEbURLTokens")?gEbURLTokens:void 0}},_startHashProtocol:function(){this._hashMessages=[];var a={ebPtcl:ebPtcl,
ebBigS:ebBigS,ebResourcePath:ebResourcePath,ebRand:ebRand,ebPli:ebPli},b={ptcl:ebPtcl,bs:EBG.bs,adId:ebO.adConfig.adId},c=this._buildSecretTagsObj();this.ebO.adConfig=this.ebO.tn!=EBG.adTypes.VisibilityAd?null:{tn:ebO.adConfig.tn,rnd:ebO.adConfig.rnd,adId:ebO.adConfig.adId,uid:ebO.adConfig.adId+"_"+ebO.adConfig.rnd};this._hashMessages[0]=this._buildHashMessages(b,EBG.INNERIFRAMEMessage.ADCONFIG_REQUEST);this._hashMessages[1]=this._buildHashMessages(this.ebO,EBG.INNERIFRAMEMessage.EBO);this._hashMessages[2]=
this._buildHashMessages(a,EBG.INNERIFRAMEMessage.GLOBALPARAMS,EBG.INNERIFRAMEMessage.NOT_LASTMSG);this._hashMessages[3]=this._buildHashMessages(c,EBG.INNERIFRAMEMessage.SECRET_TAGS,EBG.INNERIFRAMEMessage.LASTMSG);EBG.msgProtocol.receiveMessages(this._handleMessagesHashProtocol,10)},_buildHashMessages:function(a,b,c){a.typeObj=b;a.lastMsg=c?c:EBG.INNERIFRAMEMessage.NOT_LASTMSG;a.parentURL=document.location.href;return escape(JSON.stringify(a))},_sendMessageHashProtocol:function(){EBG.msgProtocol.postMessage(EBG.adaptor.serving._hashMessages[0],
EBG.adaptor.serving.addinEyeRef.src,EBG.adaptor.serving.addinEyeRef);EBG.adaptor.serving._hashMessages.splice(0,1);0==EBG.adaptor.serving._hashMessages.length&&EBG.msgProtocol.finishMessaging()},listenToMessages:function(){EBG.pm.bind(EBG.INNERIFRAMEMessage.LOADED,this._handlePostMessage,this)},_ebGetHostName:function(a){var b="",a=a.toLowerCase(),b=7<=a.length&&"http://"==a.substr(0,7)?a.substr(7):8<=a.length&&"https://"==a.substr(0,8)?a.substr(8):a,a=b.indexOf("/");0<a&&(b=b.substr(0,a));return b},
_findPlacementIframe:function(){try{var a=this.displayWin,b=window,c=null,d=-1;do{for(var d=-1,c=null,e=b.parent.frames,f=0;f<e.length;f++)try{if(e[f]==b){d=f;c=b;break}}catch(g){}b=b.parent}while(b!=a);if(!(0<=d))throw new exception("ServingMgr._findPlacementIframe","Could not find placement iframe!");b=null;try{if("undefined"!=typeof c.frameElement)b=c.frameElement}catch(h){}if(!b){for(var i=a.document.getElementsByTagName(EBG.Adaptors.TagNames.IFRAME),f=0;f<i.length;f++)i[f].contentWindow==c&&
(d=f);if(d>=i.length)throw new exception("ServingMgr._findPlacementIframe",EBG.format("frames List is too short ({0}). Needed frame is {1}",i.length,d));b=i[d]}this.placementIframe=b}catch(k){}},_handleMessagesHashProtocol:function(a){switch(a.data){case EBG.INNERIFRAMEMessage.CONTINUE_SENDING:EBG.adaptor.serving._sendMessageHashProtocol()}},_handlePostMessage:function(a){a&&a==EBG.INNERIFRAMEMessage.LOADED&&EBG.adaptor.serving._sendInitToInnerIframe()},_sendInitToInnerIframe:function(){if(EBG.adaptor.serving.ebO){var a=
{ebO:EBG.adaptor.serving.ebO,ebPtcl:ebPtcl,ebBigS:ebBigS,ebResourcePath:ebResourcePath,ebRand:ebRand,secretTagData:this._buildSecretTagsObj(),ebPli:ebPli};EBG.pm({target:this.addinEyeRef.contentWindow,type:EBG.INNERIFRAMEMessage.INIT,data:a})}}};EBG.Adaptors.FlashDetector=function(){this._init()};
EBG.Adaptors.FlashDetector.prototype={version:0,_init:function(){var a=-1;try{a=(new ActiveXObject("Shockwaveflash.Shockwaveflash.7")).GetVariable("$version"),a=this._splitFlashMajorMinorVersions(a),a=Number(a)}catch(b){}if(-1==a)try{var c=0,d=0,e=0;if(null!=navigator.plugins&&0<navigator.plugins.length){if(navigator.plugins["Shockwave Flash"]){var f=navigator.plugins["Shockwave Flash"].description.split(" "),g=f[2].split("."),c=g[0],d=g[1],e=f[3];""==e&&(e=f[4]);isNaN(e[0])&&(e=e.substring(1));0<
e.indexOf("d")&&(e=e.substring(0,e.indexOf("d")))}a=Number(c+"."+d+e)}}catch(h){}if(!isNaN(a))this.version=a},_splitFlashMajorMinorVersions:function(a){if(a)return a=a.split(" ")[1].split(","),EBG.format("{0}.{1}{2}",a[0],a[1],a[2])}};EBG.declareNamespace("Interactions");
EBG.Interactions.SystemInts={CLICK:"_eyeblaster",AD_DURATION:"ebAdDuration",REPLAY:"ebReplay",CLOSE:"ebClose",DEFAULT_CLICK:"ebDefaultClick",USER_INTERACTION:"ebUserInteraction",USER_INITIATED_VIDEO:"ebUserInitiatedVideo",UNIQUE_VIDEO_STARTED:"ebUniqueVideoStarted",ABOVE_THE_FOLD:"ebAboveTheFold",ABOVE_THE_FOLD_DURATION:"ebAboveTheFoldDuration",BELOW_THE_FOLD:"ebBelowTheFold",DWELL_TIME:"ebDwellTime",DWELL_UNIQUE:"ebUniqueDwell",RICH_FLASH_PLAYED:"ebRichFlashPlayed",INT_DURATION:"ebIntDuration",VISIBILITY_RECORDABLE:"VsR",
VISIBILITY_AGENCY_RECORDABLE:"VsRAg",VISIBILITY_ADVERTISER_RECORDABLE:"VsRAd",VISIBILITY_ADVERTISER:"VsAd",VISIBILITY_AGENCY:"VsAg",VISIBILITY_IAB:"VsIAB",VISIBLITY_ADVERTISER_DURATION:"VsAdDu",VISIBLITY_AGENCY_DURATION:"VsAgDu",VISIBILITY_AVG_AD_SURFACE:"VsAvSu",VISIBILITY_AVG_SCREEN_SHARE:"VsAvSc"};EBG.Interactions.VideoInteractionOrder=[EBG.VideoInteraction.STARTED,EBG.VideoInteraction.PERCENT_25_PLAYED,EBG.VideoInteraction.PERCENT_50_PLAYED,EBG.VideoInteraction.PERCENT_75_PLAYED,EBG.VideoInteraction.FULLPLAY];
EBG.Interactions.Categories={SYSTEM:2,VIDEO:1,CUSTOM:0};EBG.Interactions.InitiationTypes={AUTO:"auto",USER:"user"};EBG.Interactions.InteractionTypes={COUNTER:"Counter",TIMER:"Timer"};EBG.Interactions.checkURL=function(a){var b=a.toLowerCase();-1==b.indexOf("http://")&&-1==b.indexOf("https://")&&-1==b.indexOf("ftp://")&&-1==b.indexOf("aim:")&&-1==b.indexOf("mailto:")&&(a=0==b.indexOf("/")?"http://"+EBG.adaptor.getHostName()+a:"http://"+a);return a};EBG.Interactions.RemoteServersData=function(){};
EBG.Interactions.RemoteServersData.prototype={networkUrl:null,agencyUrl:null};EBG.declareClass(EBG.Interactions.RemoteServersData,null);EBG.Interactions.InteractionData=function(a,b,c){this.reportingName=a;this.adUId=b;this.category=c};EBG.Interactions.InteractionData.prototype={initiationType:EBG.Interactions.InitiationTypes.AUTO,category:EBG.Interactions.Categories.SYSTEM,isPanel:!1};EBG.declareClass(EBG.Interactions.InteractionData,null);
EBG.Interactions.CounterInteractionData=function(a,b,c){EBG.callSuperConstructor(EBG.Interactions.CounterInteractionData,this,[a,c,b]);this.remoteServers=new EBG.Interactions.RemoteServersData};EBG.Interactions.CounterInteractionData.prototype={reportImmediately:!1,countAsClick:!1,remoteServers:null,clickURL:null,numLeftToReport:10,state:null};EBG.declareClass(EBG.Interactions.CounterInteractionData,EBG.Interactions.InteractionData);
EBG.Interactions.TimerInteractionData=function(a,b,c){this.reportingName=a;EBG.callSuperConstructor(EBG.Interactions.TimerInteractionData,this,[a,c,b])};EBG.Interactions.TimerInteractionData.prototype={value:0,startTime:0,idleDuration:0};EBG.declareClass(EBG.Interactions.TimerInteractionData,EBG.Interactions.InteractionData);EBG.Interactions.AggregationInteractionData=function(a,b,c){this.reportingName=a;EBG.callSuperConstructor(EBG.Interactions.AggregationInteractionData,this,[a,c,b])};
EBG.Interactions.AggregationInteractionData.prototype={value:0,isPlaying:!1};EBG.declareClass(EBG.Interactions.AggregationInteractionData,EBG.Interactions.InteractionData);EBG.Interactions.Interaction=function(){};
EBG.Interactions.Interaction.prototype={unique:!0,_escapeInteractionName:function(a){a=a.toString();a=a.replace(/\~/ig,"_");a=a.replace(/\^/ig,"_");a=a.replace(/\|/ig,"_");return escape(a)},_buildReportFormat:function(a,b,c,d){d||(d=0);return EBG.format("{0}{2}{1}{3}{1}{4}{1}{5}{6}{7}{8}{9}",EBG.Interactions.InteractionManager.charIntDelimeter,EBG.Interactions.InteractionManager.charAdFieldsDelimeter,this._escapeInteractionName(this.interactionData.reportingName),c,d,a,this.unique?1:0,b,this.interactionData.category,
this.interactionData.isPanel?1:0)}};EBG.Interactions.CounterInteraction=function(a){EBG.callSuperConstructor(EBG.Interactions.CounterInteraction,this);this.interactionData=a?a:new EBG.Interactions.CounterInteractionData};
EBG.Interactions.CounterInteraction.prototype={type:EBG.Interactions.InteractionTypes.COUNTER,handle:function(a){var b=this.interactionData,c=!0;0==b.numLeftToReport||EBG.isPreview?c=!1:b.numLeftToReport--;var d=!1,e=!1;if(b.clickData){var f=b.clickData,g="undefined"==typeof f.tmpData.windowWasOpen?!1:f.tmpData.windowWasOpen,h=f.tmpData?f.tmpData.clickUrl:null,i=h||f.jumpUrl;if(i&&!g){if(e=c&&(f.tmpData.isClick||this._isEBClick()))this._isEBClick()&&(h||(i=""),d=!0),g=b.reportingName.toLowerCase()==
EBG.Interactions.SystemInts.DEFAULT_CLICK.toLowerCase(),h=f.tmpData.isProductClick?f.tmpData.isClick?1:2:f.tmpData.isClick?1:0,i=""==i?"":EBG.Interactions.checkURL(i),i=this._getBannerRedirectUrl(i,h,g,f.tmpData.clickedVersion);i=""==i?"":EBG.Interactions.checkURL(i);-1==f.target.indexOf(EBG.WindowTarget.BLANK)?(b.reportImmediately=!0,EBG.runTimed(this,this._openPage,[i,f],1E3)):this._openPage(i,f)}else this._isEBClick()&&(c=!1)}b="";c&&(this._handleRemoteServers(),d||(b=this._getReportingData(a,
e)));return b},getClickTagUrl:function(){var a="";if(EBG.isPreview)a=EBG.isInWorkshop?EBG.format("ReportPage_{0}.html",HTMLPageVer):this.interactionData.clickData.jumpUrl;else{var a=this._getBannerRedirectUrl(),a=EBG.format("{0}/ReportPage{1}.html?ebReportURL={2}$$ebImpressionID={3}",ebBigS,EBG.reportPageVer,escape(a),EBG.Ads.Ad.Fn.getRandFromAdUId(this.interactionData.adConfig.uid)),b=-1;EBG.adaptor.browser.isIE()&&(b=9<=EBG.adaptor.browser.getVersion()?4096:2048,b-=a.length);b=this._getReportPageTrackingUrls(b);
a+=b}return a},_getReportPageTrackingUrls:function(a){var b="$$ebTURLs=[";if(-1!=a){if(b.length>=a)return"";a-=b.length}for(var c=this.interactionData.adConfig.clickTrackingUrls,d=0;d<c.length;d++){var e=EBG.format('{0}"{1}"',0!=d?",":"",c[d]);if(-1!=a){if(e.length>=a)break;a-=e.length}b+=e}return b+"]"},_openPage:function(a,b){EBG.adaptor.openPage(a,b)},_getReportingData:function(a,b){var c=0,d=0;b||(c=this.interactionData.clickData&&this.interactionData.clickData.tmpData.isClick?1:0,d=this.interactionData.initiationType==
EBG.Interactions.InitiationTypes.USER?1:0);c=this._buildReportFormat(c,d,0,a);this.unique=!1;return c},_getBannerRedirectUrl:function(a,b,c,d){var c=EBG.isBool(c)?c:!1,e=this.interactionData.adConfig,f=EBG.Ads.Ad.Fn.getAdIdFromAdUId(this.interactionData.adConfig.uid),f=EBG.protocol+EBG.combinePaths(EBG.bs,EBG.format("BurstingPipe/adServer.bs?cn=brd&Page={0}&PluID={1}&Pos={2}&EyeblasterID={3}",e.page,EBG.pluId,e.rnd,f));void 0!=b&&(f=EBG.format("{0}&clk={1}",f,b));e.massVersioning.adVersions&&(f=d?
f+EBG.format("&vid={0}&vcl=1",d):f+EBG.format("&vid={0}",EBG.Ads.Ad.Fn.getVersionToReport(e.massVersioning.adVersions)));a&&(a=a.replace(/#/g,"%23"),f+=EBG.format("&rtu=$${0}$$",a));e.massVersioning.targetAudienceId&&(f+=EBG.format("&ta={0}",e.massVersioning.targetAudienceId));e.massVersioning.deliveryGroupId&&(f+=EBG.format("&dg={0}",e.massVersioning.deliveryGroupId));e.sPublisherPlacementId&&(f+=EBG.format("&pc={0}",e.sPublisherPlacementId));c||(f+="&di=0");e.sID&&(f+=EBG.format("&sessionid={0}",
e.sID));return f},_handleRemoteServers:function(){if(!EBG.isPreview&&this.interactionData.remoteServers){var a=this.interactionData.remoteServers,b=new EBG.Events.Event(EBG.Events.EventNames.INTERACTION_REPORT_REMOTE_SERVERS);b.dispatcher=this;b.timing=EBG.Events.EventTiming.BEFORE;b.eventData={remoteServers:a};EBG.eventMgr.dispatchEvent(b)||(a.networkUrl&&(b=this._replaceRSTokens(a.networkUrl),EBG.adaptor.reportToRemoteServerUsingImage(b)),a.agencyUrl&&(a=this._replaceRSTokens(a.agencyUrl),EBG.adaptor.reportToRemoteServerUsingImage(a)))}},
_replaceRSTokens:function(a){try{a=a.replace(/\[ebInteraction\]/ig,this.interactionData.reportingName),a=a.replace(/\[ebInteractionNum\]/ig,EBG.intMgr.adsData[this.interactionData.adConfig.uid].numOfInteractions)}catch(b){}return a},_getReportingPage:function(){var a=this.interactionData.adConfig.page,a=a.replace(/\~/ig,"_"),a=a.replace(/\^/ig,"_"),a=a.replace(/\|/ig,"_");return escape(a)},_isEBClick:function(){return this.interactionData&&(EBG.strEQ(this.interactionData.reportingName,EBG.Interactions.SystemInts.CLICK)||
EBG.strEQ(this.interactionData.reportingName,EBG.Interactions.SystemInts.DEFAULT_CLICK))}};EBG.declareClass(EBG.Interactions.CounterInteraction,EBG.Interactions.Interaction);EBG.Interactions.TimerInteraction=function(a){EBG.callSuperConstructor(EBG.Interactions.TimerInteraction,this);this.interactionData=a?a:new EBG.Interactions.TimerInteractionData};
EBG.Interactions.TimerInteraction.prototype={type:EBG.Interactions.InteractionTypes.TIMER,handle:function(a){this.isRunning()&&(this.stop(),this.start());this.interactionData.value-=this.interactionData.idleDuration/1E3;var b=EBG.Interactions.InteractionManager.MAX_AD_DURATION_SEC;this.interactionData.value=this.interactionData.value>b?b:this.interactionData.value;this.interactionData.value=Math.floor(this.interactionData.value);return 0>=this.interactionData.value?!1:this._buildReportFormat(0,0,
this.interactionData.value,a,0)},start:function(){var a=new EBG.Events.Event(EBG.Events.EventNames.START_TIMER);a.dispatcher=this;a.timing=EBG.Events.EventTiming.BEFORE;a.eventData={interaction:this};if(!EBG.eventMgr.dispatchEvent(a)){if(!this.isRunning())this.interactionData.startTime=(new Date).getTime(),a.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(a)}},stop:function(){if(this.isRunning()){var a=new EBG.Events.Event(EBG.Events.EventNames.STOP_TIMER);a.dispatcher=this;
a.timing=EBG.Events.EventTiming.BEFORE;a.eventData={interaction:this};if(!EBG.eventMgr.dispatchEvent(a))this.interactionData.value+=((new Date).getTime()-this.interactionData.startTime)/1E3,this.interactionData.startTime=0,a.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER,EBG.eventMgr.dispatchEvent(a)}},update:function(a){var b=new EBG.Events.Event(EBG.Events.EventNames.UPDATE_TIMER);b.dispatcher=this;b.timing=EBG.Events.EventTiming.BEFORE;b.eventData={interaction:this};if(!EBG.eventMgr.dispatchEvent(b))this.interactionData.value+=
a,b.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER,EBG.eventMgr.dispatchEvent(b)},clear:function(){this.interactionData.value=0;this.interactionData.startTime=0},increaseIdleDuration:function(a){this.interactionData.idleDuration+=a},isRunning:function(){return 0<this.interactionData.startTime},isFinished:function(){return 0===this.interactionData.startTime&&0<this.interactionData.value},getValue:function(){return this.interactionData.value},getType:function(){return EBG.DurationInteraction.TIMER}};
EBG.declareClass(EBG.Interactions.TimerInteraction,EBG.Interactions.Interaction);EBG.Interactions.IdleManager=function(){this.currentIdleDuration=0;this._startTime=(new Date).getTime();this.intervalId=EBG.setInterval(this,this._checkIfIdle,[],EBG.Interactions.IdleManager.IDLE_INTERVAL)};EBG.Interactions.IdleManager.IDLE_INTERVAL=5E3;
EBG.Interactions.IdleManager.prototype={_totalIdleDuration:0,_lastActiveTimeStamp:0,updateIdleDuration:function(){this.currentIdleDuration=0;var a=(new Date).getTime();if(0!==this._lastActiveTimeStamp)this.currentIdleDuration=a-this._lastActiveTimeStamp,this.currentIdleDuration>EBG.Interactions.IdleManager.IDLE_INTERVAL+2E3&&(this._totalIdleDuration+=this.currentIdleDuration,EBG.intMgr.handleAllTimers(EBG.Interactions.InteractionManager.HandleAllTimersOptions.HANDLE_IDLE))},_checkIfIdle:function(){this.updateIdleDuration();
if((this._lastActiveTimeStamp=(new Date).getTime())-this._startTime-this._totalIdleDuration>1E3*EBG.Interactions.InteractionManager.MAX_AD_DURATION_SEC)EBG.intMgr.unLoadHandler(EBG.Interactions.InteractionManager.HandleAllTimersOptions.REPORT,!1),EBG.clearInterval(this.intervalId)}};EBG.declareClass(EBG.Interactions.IdleManager,null);EBG.Interactions.StdInteractionManager=function(){this.adsData=EBG.intMgr?EBG.intMgr.adsData:{};this.adsIntQueues=EBG.intMgr?EBG.intMgr.adsIntQueues:{}};
EBG.Interactions.StdInteractionManager.prototype={copy:function(a){this.adsIntQueues=a.adsIntQueues;this.adsData=a.adsData},initAdData:function(a){var b=a.uid;this.adsIntQueues[b]=[];adData=this.adsData[b]={adConfig:a,isUserInteractionOccur:!1,isClickOccur:!1,isProductClicked:[],numOfInteractions:0,videoState:{},assetsTimers:{}};adData[EBG.Interactions.InteractionTypes.COUNTER]={};adData[EBG.Interactions.InteractionTypes.TIMER]={};adData.adConfig.isStdAd||this._addSystemInteractions(a)},addInteraction:function(a){var b=
a.interactionData.reportingName.toLowerCase(),c=a.interactionData.adUId,d=new EBG.Events.Event(EBG.Events.EventNames.ADD_INTERACTION);d.eventData=a;d.dispatcher={_adConfig:{rnd:this.adsData[c].adConfig.rnd}};d.timing=EBG.Events.EventTiming.BEFORE;var e=EBG.eventMgr.dispatchEvent(d),f=this.adsData[c];if(!e){if(!f)return;f[a.type][b]=a;a.interactionData.adConfig=this.adsData[c].adConfig}d.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(d)},getClickTag:function(a){return(a=
this._getCounterInteraction(EBG.Interactions.SystemInts.CLICK,a))?a.getClickTagUrl():""},getClickTarget:function(a){return(a=this._getCounterInteraction(EBG.Interactions.SystemInts.CLICK,a))?a.interactionData.clickData.target:""},handleCounterInteraction:function(a,b,c,d,e,f){var g=this.adsData[b].adConfig.isStdAd&&!this.adsData[b].adConfig.btf&&this.adsData[b].adConfig.visibility.mode!=EBG.VisibilityMode.ENHANCED_MODE&&this.adsData[b].adConfig.visibility.mode!=EBG.VisibilityMode.BASIC_MODE;"undefined"==
typeof f&&(f=!0);var c=c||0,h=this._getCounterInteraction(a,b);if(d)d=h.interactionData,d.initiationType=EBG.Interactions.InitiationTypes.USER,g||this._handleUserInteraction(b,d);if(h){d=h.interactionData;if(d.clickData)d.clickData.tmpData=e;e=new EBG.Events.Event(EBG.Events.EventNames.HANDLE_COUNTER_INTERACTION);e.dispatcher=this;if(!e.dispatcher._adConfig)e.dispatcher._adConfig={rnd:EBG.Ads.Ad.Fn.getRandFromAdUId(b)};e.timing=EBG.Events.EventTiming.BEFORE;e.eventData={interaction:h};if(!EBG.eventMgr.dispatchEvent(e)){g||
this._handleSpecialInteractions(a,b,c);if(d.clickData){if(1==d.clickData.fClose){var i=new EBG.Events.Event(EBG.Events.EventNames.CLOSE_AD);e.dispatcher=this;EBG.eventMgr.dispatchEvent(i)}d.clickData.tmpData.isClick=d.countAsClick&&!this.adsData[b].isClickOccur;if(d.clickData.tmpData.isClick)this.adsData[b].isClickOccur=!0;d.clickData.tmpData.isProductClick=d.countAsClick&&d.clickData.tmpData.clickedVersion&&!this.adsData[b].isProductClicked[d.clickData.tmpData.clickedVersion];d.clickData.tmpData.isProductClick&&
(this.adsData[b].isProductClicked[d.clickData.tmpData.clickedVersion]=!0)}f=f?h.handle(c):"";if(d.clickData&&!EBG.isPreview){if(d.clickData.tmpData.isClick){h=this.adsData[b].adConfig.clickTrackingUrls;for(i=0;i<h.length;i++)EBG.adaptor.reportToRemoteServerUsingImage(h[i])}d.clickData.tmpData.isProductClick&&d.clickData.tmpData.clickedVerUrl&&EBG.adaptor.reportToRemoteServerUsingImage(d.clickData.tmpData.clickedVerUrl)}this.adsData[b].numOfInteractions++;g||(this._handleUserInteraction(b,d),f&&this._handleReportData(b,
d,f),this._handleSpecialInteractions(a,b,c),f&&!this._isReportDataInQueue(b,f)&&this.reportInteractionQueues());e.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(e)}}},isInteractionExist:function(a,b,c){if(this.adsData[c]&&this.adsData[c][b])return this.adsData[c][b][a]?!0:!1},_getCounterInteraction:function(a,b){a=a.toLowerCase();if(this.adsData[b]&&this.adsData[b][EBG.Interactions.InteractionTypes.COUNTER]&&this.adsData[b][EBG.Interactions.InteractionTypes.COUNTER][a])return this.adsData[b][EBG.Interactions.InteractionTypes.COUNTER][a]}};
EBG.declareClass(EBG.Interactions.StdInteractionManager,null);
EBG.Interactions.InteractionManager=function(){EBG.callSuperConstructor(EBG.Interactions.InteractionManager,this);EBG.intMgr&&EBG.intMgr.copy(this);this.interactionPipe=EBG.combinePaths(EBG.protocol+EBG.bs,"BurstingPipe/adServer.bs?cn=int&iv=2&int=");this.idleManager=new EBG.Interactions.IdleManager;this._timedReport=EBG.isDefined(EBG.intReportTimeout)&&null!=EBG.intReportTimeout&&0<=EBG.intReportTimeout?EBG.intReportTimeout:this._timedReport;this._subscribeToEvents()};
EBG.Interactions.InteractionManager.charAdFieldsDelimeter="~";EBG.Interactions.InteractionManager.charIntDelimeter="^";EBG.Interactions.InteractionManager.intStackLength=6;EBG.Interactions.InteractionManager.MAX_AD_DURATION_SEC=900;EBG.Interactions.InteractionManager.HandleAllTimersOptions={REPORT:0,PAUSE:1,HANDLE_IDLE:2};
EBG.Interactions.InteractionManager.prototype={_isUnloadHandled:!1,_pausedTimers:null,_masterOrdinalNumber:null,_seqTimersReportData:{index:-1,intervals:[5,10,20,40,60,120,240]},_timedReport:1E4,startAggregate:function(a,b,c){if(null==this._masterOrdinalNumber)this._masterOrdinalNumber=c;this.startTimer(a,b,c)},startTimer:function(a,b,c){var d=this._getTimerInteraction(a,b);if(d){d.start();if(c)switch(d=this.adsData[b],d=d.assetsTimers[c]?d.assetsTimers[c]:d.assetsTimers[c]={},a){case EBG.VideoInteraction.VIDEO_PLAY_DURATION:this._startAssetTimer(d,
EBG.VideoInteraction.VIDEO_ASSET_DURATION,b,c);break;case EBG.VideoInteraction.FULLSCREEN_DURATION:this._startAssetTimer(d,EBG.VideoInteraction.FULLSCREEN_ASSET_DURATION,b,c)}EBG.isGlobalDef("JSON")}},_handleVideoStarted:function(a,b){this.adsData[a].isUserInteractionOccur&&this._reportUserInitatedVideo(a,b);var c=new EBG.Events.Event(EBG.Events.EventNames.DWELL_VIDEO_START);c.dispatcher={_adConfig:{rnd:EBG.Ads.Ad.Fn.getRandFromAdUId(a)}};EBG.eventMgr.dispatchEvent(c)},_startAssetTimer:function(a,
b,c,d){if(!a[b]){var e;null!=this._masterOrdinalNumber?(e=new EBG.Interactions.AggregationInteractionData(b,EBG.Interactions.Categories.VIDEO,c),a[b]=new EBG.Interactions.AggregateInteraction(e)):(e=new EBG.Interactions.TimerInteractionData(b,EBG.Interactions.Categories.VIDEO,c),a[b]=new EBG.Interactions.TimerInteraction(e))}a[b].start();this._handleVideoStarted(c,d)},updateAggregation:function(a,b,c,d){if(null==this._masterOrdinalNumber)this._masterOrdinalNumber=d;var e=this._getTimerInteraction(a,
b);if(e&&(this._masterOrdinalNumber==d&&e.update(c),d))switch(e=this.adsData[b],e=e.assetsTimers[d]?e.assetsTimers[d]:e.assetsTimers[d]={},a){case EBG.VideoInteraction.VIDEO_PLAY_DURATION:this._updateAssetAggregation(e,EBG.VideoInteraction.VIDEO_ASSET_DURATION,b,c,d);break;case EBG.VideoInteraction.FULLSCREEN_DURATION:this._updateAssetAggregation(e,EBG.VideoInteraction.FULLSCREEN_ASSET_DURATION,b,c,d)}},_updateAssetAggregation:function(a,b,c,d){a[b]||(c=new EBG.Interactions.AggregationInteractionData(b,
EBG.Interactions.Categories.VIDEO,c),a[b]=new EBG.Interactions.AggregateInteraction(c));a[b].update(d)},stopAggregate:function(){this._masterOrdinalNumber=null;this.stopTimer()},stopTimer:function(a,b,c){var d=this._getTimerInteraction(a,b),e=this.adsData[b].assetsTimers,f=!0;if(d){if(c&&e[c])switch(a){case EBG.VideoInteraction.VIDEO_PLAY_DURATION:e[c][EBG.VideoInteraction.VIDEO_ASSET_DURATION].stop();f=!this._isRunningVideoAsset(b,!1);break;case EBG.VideoInteraction.FULLSCREEN_DURATION:e[c][EBG.VideoInteraction.FULLSCREEN_ASSET_DURATION].stop()}f&&
d.stop();if(c&&!this._isRunningAnyVideoAsset(b))a=new EBG.Events.Event(EBG.Events.EventNames.DWELL_VIDEO_STOP),a.dispatcher={_adConfig:{rnd:EBG.Ads.Ad.Fn.getRandFromAdUId(b)}},EBG.eventMgr.dispatchEvent(a)}},clearTimer:function(a,b){var c=this._getTimerInteraction(a,b);c&&c.clear()},_isRunningAnyVideoAsset:function(a){return this._isRunningVideoAsset(a,!1)||this._isRunningVideoAsset(a,!0)},_isRunningVideoAsset:function(a,b){var c=this.adsData[a].assetsTimers,d;for(d in c)if(c.hasOwnProperty(d)){var e=
b?"ebFSVideoAssetDuration":"ebVideoAssetDuration";if(c[d][e]&&c[d][e].isRunning())return!0}return!1},updateTimer:function(a,b,c,d){if(a=this._getTimerInteraction(a,b))a.update(c),d&&this.adsData[b].assetsTimers[d].update(c)},getTimerValue:function(a,b){var c=this._getTimerInteraction(a,b);return c?c.getValue():0},isTimerRunning:function(a,b){var c=this._getTimerInteraction(a,b);return c?c.isRunning():!1},_handleUserInteraction:function(a,b){if(b.initiationType==EBG.Interactions.InitiationTypes.USER&&
!this.adsData[a].isUserInteractionOccur){this.adsData[a].isUserInteractionOccur=!0;var c=new EBG.Events.Event(EBG.Events.EventNames.USER_INTERACTION);c.dispatcher={_adConfig:{rnd:EBG.Ads.Ad.Fn.getRandFromAdUId(a)}};EBG.eventMgr.dispatchEvent(c);this._reportUserInteraction(a)}},_handlePanelsViewed:function(a,b){b.isPanel&&b.initiationType==EBG.Interactions.InitiationTypes.USER&&this.handleCounterInteraction(EBG.SingleExpInteractions.PANELS_VIEWED,a)},_handleReportData:function(a,b,c){this.adsIntQueues[a].push(c);
(b.reportImmediately||b.clickData&&b.clickData.tmpData.isClick||this.adsIntQueues[a].length==EBG.Interactions.InteractionManager.intStackLength)&&this.reportInteractionQueues()},_handleSpecialInteractions:function(a,b,c){var d=this._getCounterInteraction(a,b),a=d.interactionData;this._handleUserInteraction(b,a);switch(a.reportingName){case EBG.VideoInteraction.STARTED:d.unique&&this._reportUniqueVideoStarted(b);this.adsData[b].isUserInteractionOccur&&this._reportUserInitatedVideo(b,c);break;case EBG.VideoInteraction.FULLSCREEN_START:if(this._isRunningVideoAsset(b,
!1))switch(d=this._getTimerInteraction(EBG.VideoInteraction.VIDEO_PLAY_DURATION,b),d=d.getType(),d){case EBG.DurationInteraction.TIMER:this.startTimer(EBG.VideoInteraction.FULLSCREEN_DURATION,b,c);this.stopTimer(EBG.VideoInteraction.VIDEO_PLAY_DURATION,b,c);break;case EBG.DurationInteraction.AGGREGATE:this.startAggregate(EBG.VideoInteraction.FULLSCREEN_DURATION,b,c),this.stopAggregate(EBG.VideoInteraction.VIDEO_PLAY_DURATION,b,c)}break;case EBG.VideoInteraction.FULLSCREEN_END:if(this._isRunningVideoAsset(b,
!0))switch(d=this._getTimerInteraction(EBG.VideoInteraction.VIDEO_PLAY_DURATION,b),d=d.getType(),d){case EBG.DurationInteraction.TIMER:this.startTimer(EBG.VideoInteraction.VIDEO_PLAY_DURATION,b,c);this.stopTimer(EBG.VideoInteraction.FULLSCREEN_DURATION,b,c);break;case EBG.DurationInteraction.AGGREGATE:this.startAggregate(EBG.VideoInteraction.VIDEO_PLAY_DURATION,b,c),this.stopAggregate(EBG.VideoInteraction.FULLSCREEN_DURATION,b,c)}}this._handlePanelsViewed(b,a)},handleVideoInteraction:function(a,b,
c,d){if(c){var e=this.adsData[b].videoState;e[c]||(e[c]=0);var f=!0,g=EBG.indexOfArray(EBG.Interactions.VideoInteractionOrder,a);-1!=g&&(g==e[c]?e[c]++:f=!1);f&&this.handleCounterInteraction(a,b,c,d)}},handleAllTimers:function(a,b){this._pausedTimers=[];var c=new EBG.Events.Event(EBG.Events.EventNames.COLLECT_TIMERS);c.dispatcher=this;c.timing=EBG.Events.EventTiming.BEFORE;EBG.eventMgr.dispatchEvent(c);for(var d in this.adsData)if(this.adsData.hasOwnProperty(d)){var c=this.adsData[d],e=c[EBG.Interactions.InteractionTypes.TIMER];
e&&this._handleTimers(e,a,d);if(c.assetsTimers)for(var f in c.assetsTimers)c.assetsTimers.hasOwnProperty(f)&&this._handleTimers(c.assetsTimers[f],a,d,f);c=new EBG.Events.Event(EBG.Events.EventNames.COLLECT_TIMERS);c.dispatcher=this;c.timing=EBG.Events.EventTiming.ONTIME;EBG.eventMgr.dispatchEvent(c);a===EBG.Interactions.InteractionManager.HandleAllTimersOptions.REPORT&&(c=0<=this._seqTimersReportData.index,b=EBG.isBool(b)?b:!0,this.reportInteractionQueues(b,c))}},_handleTimers:function(a,b,c,d){for(var e in a)if(a.hasOwnProperty(e)){var f=
a[e];if(f.isRunning()||f.isFinished())switch(b){case EBG.Interactions.InteractionManager.HandleAllTimersOptions.REPORT:(f=f.handle(d))&&this.adsIntQueues[c].push(f);break;case EBG.Interactions.InteractionManager.HandleAllTimersOptions.PAUSE:f.stop();this._pausedTimers.push(f);break;case EBG.Interactions.InteractionManager.HandleAllTimersOptions.HANDLE_IDLE:f.increaseIdleDuration(this.idleManager.currentIdleDuration)}}},pauseAllTimers:function(){return this.handleAllTimers(EBG.Interactions.InteractionManager.HandleAllTimersOptions.PAUSE,
!0)},resumeAllTimers:function(){if(null!=this._pausedTimers){for(var a=0;a<this._pausedTimers.length;a++)this._pausedTimers[a].start();this._pausedTimers=null}},reportInteractionQueues:function(a,b){var a=EBG.isBool(a)?a:!0,b=EBG.isBool(b)?b:!1,c;for(c in this.adsData)if(this.adsData.hasOwnProperty(c))for(var d=this.adsIntQueues[c];d.length;){for(var e=this.interactionPipe,e=e+this._getAdReportData(c),f=0,g=0;g<d.length&&g<EBG.Interactions.InteractionManager.intStackLength;g++)e+=d[g],f++;for(g=0;g<
f;g++)d.shift();e+=this._getPipeParams(c,b);(!EBG.isPreview||EBG.isGlobalDef("gfEbForceReportInt"))&&EBG.adaptor.reportToRemoteServer(e,a)}},_isReportDataInQueue:function(a,b){for(var c=!1,d=this.adsIntQueues[a],e=0;e<d.length;e++)if(d[e]===b){c=!0;break}return c},_getPipeParams:function(a,b){var c="",d=this.adsData[a].adConfig.usercookie;d&&(c+=EBG.format("&usercookie={0}",d));(d=this.adsData[a].adConfig.sID)&&(c+=EBG.format("&sid={0}",d));(d=this.adsData[a].adConfig.optOut)&&(c+=EBG.format("&OptOut={0}",
d));b&&(c+=EBG.format("&iseq={0}",this._seqTimersReportData.index));EBG.isGlobalDef("gfEbForceReportInt")&&(c+="&pr=1");c+=EBG.format("&rnd={0}",Math.random());EBG.adaptor.flash&&(c+=EBG.format("&flv={0}",EBG.adaptor.flash.version));EBG.isDefined(EBG.adaptor.getResolution)&&(c+=EBG.format("&res={0}",EBG.adaptor.getResolution()));return c},_getAdReportData:function(a){var b=this.adsData[a].adConfig,c=EBG.Interactions.InteractionManager.charAdFieldsDelimeter;return EBG.format("{0}{1}{2}{3}{4}{5}{6}{7}{8}{9}{10}",
EBG.Ads.Ad.Fn.getAdIdFromAdUId(a),c,b.page,c,EBG.pluId,c,b.massVersioning.targetAudienceId,c,b.massVersioning.deliveryGroupId,c,EBG.Ads.Ad.Fn.getVersionToReport(b.massVersioning.adVersions))},_addSystemInteractions:function(a){var a=a.uid,b=new EBG.Interactions.CounterInteractionData(EBG.Interactions.SystemInts.USER_INITIATED_VIDEO,EBG.Interactions.Categories.SYSTEM,a);b.numLeftToReport=1;this.addInteraction(new EBG.Interactions.CounterInteraction(b));b=new EBG.Interactions.CounterInteractionData(EBG.Interactions.SystemInts.USER_INTERACTION,
EBG.Interactions.Categories.SYSTEM,a);b.numLeftToReport=1;this.addInteraction(new EBG.Interactions.CounterInteraction(b));b=new EBG.Interactions.CounterInteractionData(EBG.Interactions.SystemInts.UNIQUE_VIDEO_STARTED,EBG.Interactions.Categories.VIDEO,a);b.numLeftToReport=1;this.addInteraction(new EBG.Interactions.CounterInteraction(b));b=new EBG.Interactions.CounterInteractionData(EBG.Interactions.SystemInts.DWELL_UNIQUE,EBG.Interactions.Categories.SYSTEM,a);b.reportImmediately=!0;b.numLeftToReport=
1;this.addInteraction(new EBG.Interactions.CounterInteraction(b));b=new EBG.Interactions.CounterInteractionData(EBG.Interactions.SystemInts.REPLAY,EBG.Interactions.Categories.SYSTEM,a);this.addInteraction(new EBG.Interactions.CounterInteraction(b));a=new EBG.Interactions.CounterInteractionData(EBG.Interactions.SystemInts.RICH_FLASH_PLAYED,EBG.Interactions.Categories.SYSTEM,a);a.numLeftToReport=1;this.addInteraction(new EBG.Interactions.CounterInteraction(a))},_reportUserInitatedVideo:function(a,b){this.handleVideoInteraction(EBG.Interactions.SystemInts.USER_INITIATED_VIDEO,
a,b)},_reportUserInteraction:function(a){this.handleCounterInteraction(EBG.Interactions.SystemInts.USER_INTERACTION,a)},_reportUniqueVideoStarted:function(a){this.handleCounterInteraction(EBG.Interactions.SystemInts.UNIQUE_VIDEO_STARTED,a)},reportDwellUnique:function(a,b){b&&this.handleCounterInteraction(EBG.Interactions.SystemInts.DWELL_UNIQUE,a,null,!0)},reportRichFlashPlayed:function(a){this.handleCounterInteraction(EBG.Interactions.SystemInts.RICH_FLASH_PLAYED,a)},reportReplay:function(a,b){this.handleCounterInteraction(EBG.Interactions.SystemInts.REPLAY,
a,0,"user"==b.toLowerCase())},_getTimerInteraction:function(a,b){a=a.toLowerCase();if(this.adsData[b]&&this.adsData[b][EBG.Interactions.InteractionTypes.TIMER]&&this.adsData[b][EBG.Interactions.InteractionTypes.TIMER][a])return this.adsData[b][EBG.Interactions.InteractionTypes.TIMER][a]},_subscribeToEvents:function(){EBG.adaptor.supportsPageLoadEvents()?(EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_BEFORE_UNLOAD,this.unLoadHandler,this)),EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_UNLOAD,
this.unLoadHandler,this)),EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_HIDE,this.unLoadHandler,this)),EBG.runTimed(this,this.reportInteractionQueues,[],this._timedReport)):(this._seqTimersReportData.index=0,EBG.runTimed(this,this._handleAllTimersSeq,[],1E3*this._seqTimersReportData.intervals[0]))},_handleAllTimersSeq:function(){this.reportInteractionQueues();this._pausedTimers||(this.handleAllTimers(EBG.Interactions.InteractionManager.HandleAllTimersOptions.REPORT),
this.resumeAllTimers());var a=this._seqTimersReportData.index++;a<this._seqTimersReportData.intervals.length&&EBG.runTimed(this,this._handleAllTimersSeq,[],1E3*this._seqTimersReportData.intervals[a])},unLoadHandler:function(){if(!this._isUnloadHandled)this.handleAllTimers(EBG.Interactions.InteractionManager.HandleAllTimersOptions.REPORT,!1),this._isUnloadHandled=!0}};EBG.declareClass(EBG.Interactions.InteractionManager,EBG.Interactions.StdInteractionManager);EBG.declareNamespace("Positioning");
EBG.Positioning.PositionManager=function(){};
EBG.Positioning.PositionManager.prototype={isVisibile:function(a,b,c){try{return 0<this.calculateVisibilityPercentage(a,b,c)?!0:!1}catch(d){}},calculateVisibilityPercentage:function(a,b,c,d,e){try{var f=0,g=f=0,h=!(EBG.adaptor.getDisplayWin()!=top&&EBG.adaptor.serving.detectServingMode(!0)==EBG.Adaptors.ServingMode.FRIENDLY_IFRAME),i=EBG.adaptor.getScrollLeftTop(),k=EBG.adaptor.getViewPortMetrics(),m=this.calculateRightBottowCoordinate(i,k.Width,k.Height),l=EBG.adaptor.getPositioningById(a,!h),q=
!h&&window.frameElement?EBG.adaptor.getPositioningByElement(window.frameElement,!1):{X:0,Y:0};l.X+=q.X;l.Y+=q.Y;"undefined"!=typeof d&&(l.X+=d);"undefined"!=typeof e&&(l.Y+=e);var n=this.calculateRightBottowCoordinate(l,b,c),g=b*c,f=this.calculateVisibleArea(i,m,l,n);return g?f/g:0}catch(p){}},calculateRightBottowCoordinate:function(a,b,c){var d={X:0,Y:0};d.X=a.X+b;d.Y=a.Y+c;return d},calculateVisibleArea:function(a,b,c,d){try{var e=0,f=0;if(c.Y==d.Y&&c.X==d.X||b.X<=a.X||b.Y<=a.Y)return 0;c.X<=a.X&&
a.X<=d.X?e=b.X<=d.X?b.X-a.X:d.X-a.X:a.X<=c.X&&c.X<=b.X&&(e=d.X>=b.X?b.X-c.X:d.X-c.X);c.Y<=a.Y&&a.Y<=d.Y?f=b.Y<=d.Y?b.Y-a.Y:d.Y-a.Y:a.Y<=c.Y&&c.Y<=b.Y&&(f=d.Y>=b.Y?b.Y-c.Y:d.Y-c.Y);return e*f}catch(g){}},getFullRectWithClip:function(a){var b=null,b=EBG.adaptor.getDisplayWin()===EBG.adaptor.getPageWin(),c=null;if(a){var b=EBG.adaptor.getPositioningByElement(a,!b),c={width:a.offsetWidth,height:a.offsetHeight},a=a.style.clip,d=0,e=0,f=c.height,g=c.width;""!=a&&(a=a.substring(a.indexOf("(")+1).replace(/,/g,
"").replace(/ /g,""),a=a.split("px"),e=parseInt(a[0]),g=parseInt(a[1]),f=parseInt(a[2]),d=parseInt(a[3]));c.left=b.X+d;c.top=b.Y+e;c.width-=c.width-g;c.width-=d;c.height-=c.height-f;c.height-=e;c.right=c.left+c.width;c.bottom=c.top+c.height}return c},isOverlapping:function(a,b){if(!a||0==a.offsetWidth&&0==a.offsetHeight||!b||0==b.offsetWidth&&0==b.offsetHeight)return!1;var c=EBG.posHelper.getFullRectWithClip(a),d=EBG.posHelper.getFullRectWithClip(b);return!c||!d||c.bottom<d.top||c.top>d.bottom||c.right<
d.left||c.left>d.right?!1:!0}};EBG.declareClass(EBG.Positioning.PositionManager,null);EBG.declareNamespace("RichModules");EBG.RichModules.AboveTheFoldManager=function(a){this.adConfig=a;this._subscribeToEvents()};
EBG.RichModules.AboveTheFoldManager.prototype={adConfig:null,_resObjId:null,_timeOutFlag:null,_aboveTheFoldReported:!1,_resizeTimeOutId:null,_subscribeToEvents:function(){try{EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_RESIZE,this._pageResizeHandler,this));EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_SCROLL,this._pageScrollHandler,this));var a=new EBG.Events.EventSubscription(EBG.Events.EventNames.COLLECT_TIMERS,
this._collectTimersHandler,this);a.timing=EBG.Events.EventTiming.ONTIME;EBG.eventMgr.subscribeToEvent(a)}catch(b){}},checkAboveTheFold:function(a){try{this._resObjId=a;if(this._timeOutFlag)clearTimeout(this._timeOutFlag),this._timeOutFlag=null;if(EBG.posHelper.isVisibile(this._resObjId,this.adConfig.width,this.adConfig.height)){if(EBG.intMgr.startTimer(EBG.Interactions.SystemInts.ABOVE_THE_FOLD_DURATION,this.adConfig.uid),!this._aboveTheFoldReported)this._timeOutFlag=EBG.runTimed(this,this._reportAboveTheFold,
[],1E3)}else this._aboveTheFoldReported||EBG.intMgr.clearTimer(EBG.Interactions.SystemInts.ABOVE_THE_FOLD_DURATION,this.adConfig.uid),EBG.intMgr.stopTimer(EBG.Interactions.SystemInts.ABOVE_THE_FOLD_DURATION,this.adConfig.uid)}catch(b){}},_collectTimersHandler:function(){this._aboveTheFoldReported||this._reportBelowTheFold()},_pageScrollHandler:function(){this.checkAboveTheFold(this._resObjId)},_pageResizeHandler:function(){if(!this._resizeTimeOut){var a=this;this._resizeTimeOut=setTimeout(function(){a._resizeTimeOut=
null;a.checkAboveTheFold(a._resObjId)},100)}},_reportAboveTheFold:function(){this._timeOutFlag=null;EBG.intMgr.handleCounterInteraction(EBG.Interactions.SystemInts.ABOVE_THE_FOLD,this.adConfig.uid);this._aboveTheFoldReported=!0},_reportBelowTheFold:function(){EBG.intMgr.handleCounterInteraction(EBG.Interactions.SystemInts.BELOW_THE_FOLD,this.adConfig.uid)},_pageFocusHandler:function(){},_pageBlurHandler:function(){}};EBG.declareClass(EBG.RichModules.AboveTheFoldManager,null);EBG.declareNamespace("RichModules");
EBG.RichModules.VisibilityManager=function(a,b){this.adConfig=a;this._averageLastCalcTime=(new Date).getTime();if(EBG.Initializer._getAdClass({tn:this.adConfig.templateName}).requiresIframeBust||EBG.adaptor.serving.detectServingMode(!0)!=EBG.Adaptors.ServingMode.IFRAME)this._initializeVisibilityData(b),this._subscribeToEvents(),this._visRecordable=!0,this._reportVisibilityRecordable()};EBG.RichModules.VisibilityManager.ThreholdType={IAB:0,Agency:1,Advertiser:2};
EBG.RichModules.VisibilityManager.prototype={adConfig:null,_resObjId:null,_visibilityData:null,_visRecordable:!1,_lastVisPercentage:0,_averageVisibility:0,_averageScreenShare:0,_averageAdDuration:0,_averageLastCalcTime:null,_focusOnResourceElem:null,_justReceivedFocusOnPage:null,_supportVisibilityAPI:null,_isIE:!1,_servingMode:null,checkVisibility:function(a){if(this._visRecordable&&a){if(this._resObjId!=a&&(this._resObjId=a,EBG.adaptor.getElementById(this._resObjId),!this._supportVisibilityAPI)){var b=
this,a=function(){b._resourceBlurHandler()},c=new EBG.Events.EventSubscription("focus",function(){b._resourceFocusHandler()},this);c.isElementEvent=!0;c.elementId=this._resObjId;EBG.eventMgr.subscribeToEvent(c);if(this._isIE&&this._servingMode!=EBG.Adaptors.ServingMode.SCRIPT)c=new EBG.Events.EventSubscription("blur",a,this),c.isElementEvent=!0,c.elementId=this._resObjId,EBG.eventMgr.subscribeToEvent(c)}a=this._calculateVisibilityPercentage(this._resObjId,this.adConfig.width,this.adConfig.height,
this.adConfig.offsetX,this.adConfig.offsetY);this.adConfig.visibility.mode==EBG.VisibilityMode.ENHANCED_MODE&&this._calculateAverages(a);for(var d in EBG.RichModules.VisibilityManager.ThreholdType)EBG.RichModules.VisibilityManager.ThreholdType.hasOwnProperty(d)&&this._visibilityData[EBG.RichModules.VisibilityManager.ThreholdType[d]].isActive&&this._execCheckVisibility(a,EBG.RichModules.VisibilityManager.ThreholdType[d])}},_calculateVisibilityPercentage:function(a,b,c,d,e){visPercentge=0;EBG.adaptor.isPageVisible()&&
(visPercentge=100*EBG.posHelper.calculateVisibilityPercentage(a,b,c,d,e));return visPercentge},_subscribeToEvents:function(){try{EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_RESIZE,this._pageResizeHandler,this));EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_SCROLL,this._pageScrollHandler,this));if(this.adConfig.visibility.mode==EBG.VisibilityMode.ENHANCED_MODE){var a=new EBG.Events.EventSubscription(EBG.Events.EventNames.COLLECT_TIMERS,
this._collectTimersHandler,this);a.timing=EBG.Events.EventTiming.BEFORE;EBG.eventMgr.subscribeToEvent(a)}this._supportVisibilityAPI||(EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_FOCUS,this._pageFocusHandler,this)),EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_BLUR,this._pageBlurHandler,this)));var b=new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_HIDDEN,this._pageHiddenHandler,this);b.isDocumentEvent=
!0;EBG.eventMgr.subscribeToEvent(b);b=new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_VISIBLE,this._pageVisibleHandler,this);b.isDocumentEvent=!0;EBG.eventMgr.subscribeToEvent(b)}catch(c){}},_initializeVisibilityData:function(a){this._supportVisibilityAPI=EBG.adaptor._getVisibilityEventName();this._isIE=EBG.adaptor.browser.isIE();this._servingMode=EBG.adaptor.serving.detectServingMode(!0);this._visibilityData=[];this._visibilityData[EBG.RichModules.VisibilityManager.ThreholdType.IAB]=
{minSurface:this.adConfig.visibility.iabMinSurface,minDuration:this.adConfig.visibility.iabMinDuration,visibilityInteraction:EBG.Interactions.SystemInts.VISIBILITY_IAB,durationInteraction:null,isActive:!a,durationNeeded:!1,timeOutFlag:null,reported:!1};this._visibilityData[EBG.RichModules.VisibilityManager.ThreholdType.Agency]={minSurface:this.adConfig.visibility.agencyMinSurface,minDuration:this.adConfig.visibility.agencyMinDuration,visibilityInteraction:EBG.Interactions.SystemInts.VISIBILITY_AGENCY,
durationInteraction:EBG.Interactions.SystemInts.VISIBLITY_AGENCY_DURATION,isActive:this.adConfig.visibility.mode!=EBG.VisibilityMode.DEFAULT_MODE,durationNeeded:this.adConfig.visibility.mode==EBG.VisibilityMode.ENHANCED_MODE,timeOutFlag:null,reported:!1};this._visibilityData[EBG.RichModules.VisibilityManager.ThreholdType.Advertiser]={minSurface:this.adConfig.visibility.advertiserMinSurface,minDuration:this.adConfig.visibility.advertiserMinDuration,visibilityInteraction:EBG.Interactions.SystemInts.VISIBILITY_ADVERTISER,
durationInteraction:EBG.Interactions.SystemInts.VISIBLITY_ADVERTISER_DURATION,isActive:this.adConfig.visibility.mode==EBG.VisibilityMode.ENHANCED_MODE,durationNeeded:this.adConfig.visibility.mode==EBG.VisibilityMode.ENHANCED_MODE,timeOutFlag:null,reported:!1}},_execCheckVisibility:function(a,b){try{if(a>=this._visibilityData[b].minSurface)if(!this._visibilityData[b].reported&&!this._visibilityData[b].timeOutFlag){var c=this;this._visibilityData[b].timeOutFlag=EBG.runTimed(this,function(){c._visibilityData[b].timeOutFlag=
null;EBG.intMgr.handleCounterInteraction(c._visibilityData[b].visibilityInteraction,c.adConfig.uid);c._visibilityData[b].durationNeeded&&c._visibilityData[b].durationInteraction&&(EBG.intMgr.updateTimer(c._visibilityData[b].durationInteraction,c.adConfig.uid,c._visibilityData[b].minDuration),EBG.intMgr.startTimer(c._visibilityData[b].durationInteraction,c.adConfig.uid));c._visibilityData[b].reported=!0},[],1E3*this._visibilityData[b].minDuration)}else this._visibilityData[b].reported&&this._visibilityData[b].durationNeeded&&
this._visibilityData[b].durationInteraction&&EBG.intMgr.startTimer(this._visibilityData[b].durationInteraction,this.adConfig.uid);else this._stopDurationTimeout(b),this._visibilityData[b].durationInteraction&&this._stopDurationCounting(b)}catch(d){}},_stopDurationTimeout:function(a){if(this._visibilityData[a].timeOutFlag)clearTimeout(this._visibilityData[a].timeOutFlag),this._visibilityData[a].timeOutFlag=null},_stopDurationCounting:function(a){this._visibilityData[a].durationNeeded&&this._visibilityData[a].durationInteraction&&
EBG.intMgr.stopTimer(this._visibilityData[a].durationInteraction,this.adConfig.uid)},_pageScrollHandler:function(){this.checkVisibility(this._resObjId)},_pageResizeHandler:function(){if(!this._resizeTimeOut){var a=this;this._resizeTimeOut=setTimeout(function(){a._resizeTimeOut=null;a.checkVisibility(a._resObjId)},100)}},_reportVisibilityRecordable:function(){EBG.intMgr.handleCounterInteraction(EBG.Interactions.SystemInts.VISIBILITY_RECORDABLE,this.adConfig.uid);(this.adConfig.visibility.mode==EBG.VisibilityMode.BASIC_MODE||
this.adConfig.visibility.mode==EBG.VisibilityMode.ENHANCED_MODE)&&EBG.intMgr.handleCounterInteraction(EBG.Interactions.SystemInts.VISIBILITY_AGENCY_RECORDABLE,this.adConfig.uid);this.adConfig.visibility.mode==EBG.VisibilityMode.ENHANCED_MODE&&EBG.intMgr.handleCounterInteraction(EBG.Interactions.SystemInts.VISIBILITY_ADVERTISER_RECORDABLE,this.adConfig.uid)},_collectTimersHandler:function(){EBG.intMgr.clearTimer(EBG.Interactions.SystemInts.VISIBILITY_AVG_AD_SURFACE,this.adConfig.uid);EBG.intMgr.clearTimer(EBG.Interactions.SystemInts.VISIBILITY_AVG_SCREEN_SHARE,
this.adConfig.uid);this._calculateAverages(0);EBG.intMgr.updateTimer(EBG.Interactions.SystemInts.VISIBILITY_AVG_AD_SURFACE,this.adConfig.uid,this._averageVisibility);EBG.intMgr.updateTimer(EBG.Interactions.SystemInts.VISIBILITY_AVG_SCREEN_SHARE,this.adConfig.uid,this._averageScreenShare)},_calculateAverages:function(a){var b=(new Date).getTime()-this._averageLastCalcTime;if(0<this._lastVisPercentage&&1E3<b){this._averageVisibility=(this._averageVisibility*this._averageAdDuration+this._lastVisPercentage*
b)/(this._averageAdDuration+b);var c=EBG.adaptor.getViewPortMetrics();this._averageScreenShare=(this._averageScreenShare*this._averageAdDuration+100*(this._lastVisPercentage*this.adConfig.width*this.adConfig.height/100/(c.Width*c.Height))*b)/(this._averageAdDuration+b);this._averageAdDuration+=b}this._lastVisPercentage=a;this._averageLastCalcTime=(new Date).getTime()},_pageVisibleHandler:function(){this.checkVisibility(this._resObjId)},_pageHiddenHandler:function(){for(var a in EBG.RichModules.VisibilityManager.ThreholdType)EBG.RichModules.VisibilityManager.ThreholdType.hasOwnProperty(a)&&
this._visibilityData[EBG.RichModules.VisibilityManager.ThreholdType[a]].isActive&&(this._stopDurationTimeout(EBG.RichModules.VisibilityManager.ThreholdType[a]),this._stopDurationCounting(EBG.RichModules.VisibilityManager.ThreholdType[a]));this.adConfig.visibility.mode==EBG.VisibilityMode.ENHANCED_MODE&&this._calculateAverages(0)},_resourceFocusHandler:function(){this._focusOnResourceElem=!0;EBG.runTimed(this,function(){this._focusOnResourceElem=!1},[],60);this._pageFocusHandler()},_resourceBlurHandler:function(){EBG.runTimed(this,
function(){this._justReceivedFocusOnPage||this._pageBlurHandler()},[],30)},_pageFocusHandler:function(){this._justReceivedFocusOnPage=!0;EBG.runTimed(this,function(){this._justReceivedFocusOnPage=!1},[],60);this.checkVisibility(this._resObjId)},_pageBlurHandler:function(){EBG.runTimed(this,function(){this._focusOnResourceElem||this._pageHiddenHandler()},[],30)}};EBG.declareClass(EBG.RichModules.VisibilityManager,null);EBG.declareNamespace("AdChoice");
EBG.AdChoice.AdChoiceManager=function(a){this._adConfig=a;this._active=a.adChoice.includeMarker;this._iconAdded=!1};EBG.AdChoice.AdChoiceManager.ImageData=function(){this.iconSrc="";this.id=""};
EBG.AdChoice.AdChoiceManager.IabIconData={en:{icon:"OBA_DEFAULT.png",url:"http://www.youronlinechoices.com/uk/"},"de-at":{icon:"OBA_AUSTRIA.png",url:"http://www.youronlinechoices.com/at/"},"fr-be":{icon:"OBA_BELGIUM_FR.png",url:"http://www.youronlinechoices.com/be-fr/"},"nl-be":{icon:"OBA_BELGIUM_NL.png",url:"http://www.youronlinechoices.com/be-nl/"},bg:{icon:"OBA_BULGARIA.png",url:"http://www.youronlinechoices.com/bg/"},cs:{icon:"OBA_CZECH.png",url:"http://www.youronlinechoices.com/cs/"},da:{icon:"OBA_DENMARK.png",
url:"http://www.youronlinechoices.com/den/"},fi:{icon:"OBA_FINLAND.png",url:"http://www.youronlinechoices.com/fi/"},fr:{icon:"OBA_FRANCE.png",url:"http://www.youronlinechoices.com/fr/"},de:{icon:"OBA_GERMANY.png",url:"http://www.youronlinechoices.com/de/"},el:{icon:"OBA_GREEK.png",url:"http://www.youronlinechoices.com/gr/"},hu:{icon:"OBA_HUNGARY.png",url:"http://www.youronlinechoices.com/hu/"},"en-ie":{icon:"OBA_IRELAND.png",url:"http://www.youronlinechoices.com/ie/"},it:{icon:"OBA_ITALY.png",url:"http://www.youronlinechoices.com/it/"},
nl:{icon:"OBA_NETHERLANDS.png",url:"http://www.youronlinechoices.com/nl/"},no:{icon:"OBA_NORWAY.png",url:"http://www.youronlinechoices.com/nor/"},pl:{icon:"OBA_POLAND.png",url:"http://www.youronlinechoices.com/pl/"},ro:{icon:"OBA_ROMANIA.png",url:"http://www.youronlinechoices.com/ro/"},sl:{icon:"OBA_SLOVAKIA.png",url:"http://www.youronlinechoices.com/sl/"},es:{icon:"OBA_SPAIN.png",url:"http://www.youronlinechoices.com/es/"},sv:{icon:"OBA_SWEDEN.png",url:"http://www.youronlinechoices.com/se/"},"de-ch":{icon:"OBA_SWITZERLAND_DE.png",
url:"http://www.youronlinechoices.com/ch-de/"},"fr-ch":{icon:"OBA_SWITZERLAND_FR.png",url:"http://www.youronlinechoices.com/ch-fr/"},"it-ch":{icon:"OBA_SWITZERLAND_IT.png",url:"http://www.youronlinechoices.com/ch-it/"},"en-gb":{icon:"OBA_UK.png",url:"http://www.youronlinechoices.com/uk/"},hr:{icon:"OBA_DEFAULT.png",url:"http://www.youronlinechoices.com/hr/"},is:{icon:"OBA_DEFAULT.png",url:"http://www.youronlinechoices.com/is/"},lt:{icon:"OBA_DEFAULT.png",url:"http://www.youronlinechoices.com/lt/"},
lv:{icon:"OBA_DEFAULT.png",url:"http://www.youronlinechoices.com/lv/"},pt:{icon:"OBA_DEFAULT.png",url:"http://www.youronlinechoices.com/pt/"},sk:{icon:"OBA_DEFAULT.png",url:"http://www.youronlinechoices.com/sk/"}};EBG.AdChoice.AdChoiceManager.NaiIconData={en:{icon:"OBA_DEFAULT.png",url:"http://www.aboutads.info/consumers"}};EBG.AdChoice.AdChoiceManager.IabClosedIconName="OBA.png";EBG.AdChoice.AdChoiceManager.NaiClosedIconName="OBA.png";
EBG.AdChoice.AdChoiceManager.VisibilityState={HIDDEN:"hidden",VISIBLE:"visible"};EBG.AdChoice.AdChoiceManager.Position={ABSOLUTE:"absolute",RELATIVE:"relative"};EBG.AdChoice.AdChoiceManager.ImageLoadTimeout=200;EBG.AdChoice.AdChoiceManager.DefaultOffset=-1E3;
EBG.AdChoice.AdChoiceManager.prototype={_imgData:null,_imgExpData:null,_iconLocalData:null,_acCloseIconName:null,_spanId:null,_iconsBaseUrl:null,_containerId:null,_assetObjId:null,init:function(){if(this._active){this._iconsBaseUrl=this._getIconsDir(this._adConfig.adChoice.iconPosition);var a=new EBG.Events.EventSubscription(EBG.Events.EventNames.ADD_CREATIVES,this._handleAdChoice,this);a.timing=EBG.Events.EventTiming.AFTER;a.dispatcherFilters={"_adConfig.rnd":this._adConfig.rnd};EBG.eventMgr.subscribeToEvent(a);
a=new EBG.Events.EventSubscription(EBG.Events.EventNames.ADD_BANNER_DEFAULT_IMAGE_CREATIVE,this._handleAdChoice,this);a.timing=EBG.Events.EventTiming.AFTER;a.dispatcherFilters={"_adConfig.rnd":this._adConfig.rnd};EBG.eventMgr.subscribeToEvent(a);a=new EBG.Events.EventSubscription(EBG.Events.EventNames.ADD_BANNER_DEFAULT_FLASH_CREATIVE,this._handleAdChoice,this);a.timing=EBG.Events.EventTiming.AFTER;a.dispatcherFilters={"_adConfig.rnd":this._adConfig.rnd};EBG.eventMgr.subscribeToEvent(a);EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_RESIZE,
this._pageResizeHandler,this));this._adConfig.adChoice.certificationProgram==EBG.AcCertProgram.NAI_US?(this._iconLocalData=this._getIconDataByLanguage(EBG.AdChoice.AdChoiceManager.NaiIconData),this._acCloseIconName=EBG.AdChoice.AdChoiceManager.NaiClosedIconName):(this._iconLocalData=this._getIconDataByLanguage(EBG.AdChoice.AdChoiceManager.IabIconData),this._acCloseIconName=EBG.AdChoice.AdChoiceManager.IabClosedIconName)}},_handleAdChoice:function(a){if(a.eventData&&!a.eventData.isPanel)this._assetObjId=
a.eventData.assetId;if(this._iconAdded){var a=EBG.adaptor.getElementById(this._containerId),b=EBG.adaptor.getElementById(this._spanId);EBG.adaptor.removeElement(b);EBG.adaptor.appendChildElement(a.id,b)}else this._iconAdded=!0,this._containerId=this._adConfig.placeHolderId,this._imgData=this._getImageData(),this._imgExpData=this._getExpImageData(),this._addAdChoiceIcons(this._imgData,this._imgExpData,this._getAdChoiceUrl()),this._subscribeIconToEvents(this._imgData.id,this._imgExpData.id)},_getImageData:function(){var a=
new EBG.AdChoice.AdChoiceManager.ImageData;a.iconSrc=this._iconsBaseUrl+this._acCloseIconName;a.id="acImage_"+this._adConfig.uid;return a},_getExpImageData:function(){var a=new EBG.AdChoice.AdChoiceManager.ImageData;a.iconSrc=this._iconsBaseUrl+this._iconLocalData.icon;a.id="acExpImage_"+this._adConfig.uid;return a},_getAdChoiceUrl:function(){var a="";return a=this._adConfig.adChoice.customUrl?unescape(this._adConfig.adChoice.customUrl):this._iconLocalData.url},_getIconDataByLanguage:function(a){var b=
EBG.adaptor.getBrowserLanguage().toLowerCase(),c=a[b];c||(b=b.split("-")[0],c=a[b]);c||(c=a.en);return c},_getIconOffsets:function(a,b,c,d,e,f){var g={offsetLeft:EBG.px(EBG.AdChoice.AdChoiceManager.DefaultOffset),offsetTop:EBG.px(EBG.AdChoice.AdChoiceManager.DefaultOffset)};if(this._assetObjId&&(adPos=EBG.adaptor.getPositioningById(this._assetObjId,!0))){acPos=EBG.adaptor.getPositioningById(a,!0);var h=EBG.adaptor.getStyleOfElem(EBG.adaptor.getElementById(a)),a=parseInt(h.left)+adPos.X-acPos.X,h=
parseInt(h.top)+adPos.Y-acPos.Y;switch(b){case EBG.AcIconPosition.BottomLeft:g.offsetLeft=EBG.px(a);g.offsetTop=EBG.px(h+f-d);break;case EBG.AcIconPosition.BottomRight:g.offsetLeft=EBG.px(a+e-c);g.offsetTop=EBG.px(h+f-d);break;case EBG.AcIconPosition.TopLeft:g.offsetLeft=EBG.px(a);g.offsetTop=EBG.px(h);break;case EBG.AcIconPosition.TopRight:g.offsetLeft=EBG.px(a+e-c),g.offsetTop=EBG.px(h)}}return g},_getIconsDir:function(a){var b=this._adConfig.imagesDir+"/AdChoice/";switch(a){case EBG.AcIconPosition.BottomLeft:b+=
"BottomLeft/";break;case EBG.AcIconPosition.BottomRight:b+="BottomRight/";break;case EBG.AcIconPosition.TopLeft:b+="TopLeft/";break;case EBG.AcIconPosition.TopRight:b+="TopRight/"}return b},_addAdChoiceIcons:function(a,b,c){var d="acImgLinkWrapper_"+this._adConfig.uid;this._spanId="acSpan_"+this._adConfig.uid;var e=EBG.adaptor.getElementById(this._containerId);if(e&&(c={tagName:EBG.Adaptors.TagNames.DIV,attributes:{id:this._spanId,style:{position:EBG.AdChoice.AdChoiceManager.Position.ABSOLUTE,zIndex:EBG.adaptor.getMaxZIndex(e)+
1}},children:[{tagName:EBG.Adaptors.TagNames.A,attributes:{id:d,target:"_blank",href:c,mmskipreplace:1},children:null}]},this._containerId==this._adConfig.placeHolderId?EBG.adaptor.inject(c,EBG.Adaptors.InjectionMethod.APPEND,e):EBG.adaptor.inject(c,EBG.Adaptors.InjectionMethod.INSERT_BEFORE,e),d=EBG.adaptor.getElementById(d))){e={tagName:EBG.Adaptors.TagNames.IMG,attributes:{id:a.id,style:{position:EBG.AdChoice.AdChoiceManager.Position.ABSOLUTE,visibility:EBG.AdChoice.AdChoiceManager.VisibilityState.VISIBLE,
left:EBG.px(EBG.AdChoice.AdChoiceManager.DefaultOffset),top:EBG.px(EBG.AdChoice.AdChoiceManager.DefaultOffset)}},children:null};EBG.adaptor.inject(e,EBG.Adaptors.InjectionMethod.APPEND,d);e={tagName:EBG.Adaptors.TagNames.IMG,attributes:{id:b.id,style:{position:EBG.AdChoice.AdChoiceManager.Position.ABSOLUTE,visibility:EBG.AdChoice.AdChoiceManager.VisibilityState.HIDDEN,left:EBG.px(EBG.AdChoice.AdChoiceManager.DefaultOffset),top:EBG.px(EBG.AdChoice.AdChoiceManager.DefaultOffset)}},children:null};EBG.adaptor.inject(e,
EBG.Adaptors.InjectionMethod.APPEND,d);var d=EBG.adaptor.getElementById(a.id),e=EBG.adaptor.getElementById(b.id),f=this,g=function(){EBG.runTimed(f,f._handleImgOnloadEvent,[a.id,0],EBG.AdChoice.AdChoiceManager.ImageLoadTimeout)},c=function(){EBG.runTimed(f,f._handleImgOnloadEvent,[b.id,0],EBG.AdChoice.AdChoiceManager.ImageLoadTimeout)};if(d)g=new EBG.Events.EventSubscription("load",g,this),g.isElementEvent=!0,g.elementId=a.id,EBG.eventMgr.subscribeToEvent(g),d.src=a.iconSrc;if(e)g=new EBG.Events.EventSubscription("load",
c,this),g.isElementEvent=!0,g.elementId=b.id,EBG.eventMgr.subscribeToEvent(g),e.src=b.iconSrc}},_subscribeIconToEvents:function(a,b){var c=this,d=function(){c._handleMouseOverEvent(a,b)},e=new EBG.Events.EventSubscription("mouseover",d,this);e.isElementEvent=!0;e.elementId=a;EBG.eventMgr.subscribeToEvent(e);e=new EBG.Events.EventSubscription("mouseout",d,this);e.isElementEvent=!0;e.elementId=b;EBG.eventMgr.subscribeToEvent(e)},_handleMouseOverEvent:function(a,b){var c=EBG.adaptor.getElementById(a),
d=EBG.adaptor.getElementById(b),e=EBG.adaptor.getStyleOfElem(c),f=EBG.AdChoice.AdChoiceManager.VisibilityState.VISIBLE,g=EBG.AdChoice.AdChoiceManager.VisibilityState.HIDDEN;if(e.visibility==EBG.AdChoice.AdChoiceManager.VisibilityState.VISIBLE)f=EBG.AdChoice.AdChoiceManager.VisibilityState.HIDDEN,g=EBG.AdChoice.AdChoiceManager.VisibilityState.VISIBLE;e={visibility:g};EBG.adaptor.setStyleToElem(c,{visibility:f});EBG.adaptor.setStyleToElem(d,e)},_pageResizeHandler:function(){this._handleImgOnloadEvent(this._imgData.id,
0);this._handleImgOnloadEvent(this._imgExpData.id,0)},_handleImgOnloadEvent:function(a,b){var c=EBG.adaptor.getElementById(a);imgPos=this._getIconOffsets(a,this._adConfig.adChoice.iconPosition,c.width,c.height,this._adConfig.width,this._adConfig.height);(!imgPos||0==c.width||0==c.height)&&10>b?EBG.runTimed(this,this._rehandleImgOnloadEvent,[a,b],EBG.AdChoice.AdChoiceManager.ImageLoadTimeout):EBG.adaptor.setStyleToElem(c,{left:imgPos.offsetLeft,top:imgPos.offsetTop})},_rehandleImgOnloadEvent:function(a,
b){this._handleImgOnloadEvent(a,b+1)}};EBG.declareNamespace("Ads");EBG.Ads.Ad=function(a){this._adConfig=a;this._adConfig.isStdAd=this._isStdAd();this._fixPage();this._updateURLs();this._show()};
EBG.Ads.Ad.prototype={resizePlaceHolder:!0,isInline:!0,_adConfig:null,_adChoice:null,_isStdAd:function(){return!0},_counterInteractionHandler:function(a){try{var b=a.eventData.intName;if(!b)b=EBG.Interactions.SystemInts.CLICK;a.eventData.clickUrl=this._replaceURLTokens(a.eventData.clickUrl);a.eventData.clickedVerUrl=this._replaceURLTokens(a.eventData.clickedVerUrl);EBG.intMgr.handleCounterInteraction(b,this._adConfig.uid,0,null,a.eventData,"undefined"!=typeof a.eventData.handleClickInt?a.eventData.handleClickInt:
!0)}catch(c){}},_versionTrackingImpressionHandler:function(a){try{if(a.eventData.impTrackingUrls&&!EBG.isPreview)for(var b=0;b<a.eventData.impTrackingUrls.length;b++){var c=a.eventData.impTrackingUrls[b];c&&(c=this._replaceURLTokens(c),EBG.adaptor.reportToRemoteServerUsingImage(c))}}catch(d){}},_show:function(){try{var a=new EBG.Events.Event(EBG.Events.EventNames.SHOW_AD);a.dispatcher=this;a.timing=EBG.Events.EventTiming.BEFORE;EBG.eventMgr.dispatchEvent(a);this._subscribeToEvents();EBG.intMgr.initAdData(this._adConfig);
this._addSystemInteractions();this._verifyPlaceHolder();this._adChoice=new EBG.AdChoice.AdChoiceManager(this._adConfig);this._adChoice.init();this._canShow()&&!this._adConfig.showOnlyImage?(this._addVideoInteractions(),this._addCustomInteractions(),this._addCreatives()):this.showDefaultImage&&this.showDefaultImage();var b=EBG.adaptor.getElementById(this._adConfig.placeHolderId);b&&this.resizePlaceHolder&&(EBG.adaptor.setElemStyle(b,"width",EBG.px(this._adConfig.width)),EBG.adaptor.setElemStyle(b,
"height",EBG.px(this._adConfig.height)),EBG.adaptor.setElemStyle(b,"margin","0px auto"),this.isInline&&EBG.adaptor.setElemStyle(b,"display","inline"));a.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(a)}catch(c){}},_verifyPlaceHolder:function(){!EBG.adaptor.getElementById(this._adConfig.placeHolderId)&&!document.body&&document.write('<img style="width:0;height:0"></img>');return EBG.adaptor.getElementById(this._adConfig.placeHolderId)},_canShow:function(){return!0},_onPlayHandler:function(){this._adConfig.arrOnPlayEvents&&
this._executeEvents(this._adConfig.arrOnPlayEvents)},_onDownloadHandler:function(){this._adConfig.arrOnStartDnlEvents&&this._executeEvents(this._adConfig.arrOnStartDnlEvents)},_collectUrl:function(){if(!EBG.isPreview&&this._adConfig.shouldCollectUrl)try{EBG.adaptor.reportToRemoteServer(EBG.format("{0}{1}/BurstingPipe/adServer.bs?cn=curl&ai={2}&url=$${3}$$",EBG.protocol,EBG.bs,this._adConfig.adId,top.document.URL))}catch(a){}},_executeEvents:function(a){for(var b=0;b<a.length;b++){var c,d=this._replaceURLTokens(a[b].url);
switch(a[b].typeId){case 3:c="ebPlayScript"+b;EBG.adaptor.writeScript(EBG.adaptor.generateElementId(c,this._adConfig.uid),d,this._adConfig.placeHolderId);break;case 5:c="ebDnlScript"+b;EBG.adaptor.writeScript(EBG.adaptor.generateElementId(c,this._adConfig.uid),d,this._adConfig.placeHolderId);break;case 4:c="ebPlayIFR"+b;EBG.adaptor.writeReportingIFrame(EBG.adaptor.generateElementId(c,this._adConfig.uid),d,this._adConfig.placeHolderId);break;case 6:c="ebDnlIFR"+b,EBG.adaptor.writeReportingIFrame(EBG.adaptor.generateElementId(c,
this._adConfig.uid),d,this._adConfig.placeHolderId)}}},_addSystemInteractions:function(){try{var a=this._adConfig.interactions[EBG.Interactions.SystemInts.CLICK];if(a){var b=EBG.Interactions.Categories.SYSTEM;this._addCounterInteraction(EBG.Interactions.SystemInts.CLICK,b);this._adConfig.interactions[EBG.Interactions.SystemInts.DEFAULT_CLICK]=EBG.cloneObj(a);this._addCounterInteraction(EBG.Interactions.SystemInts.DEFAULT_CLICK,b)}}catch(c){}},_addCounterInteraction:function(a,b,c){var d=this._adConfig.interactions[a],
b=new EBG.Interactions.CounterInteractionData(a,b,this._adConfig.uid);b.initiationType=d.nInitiated?EBG.Interactions.InitiationTypes.USER:EBG.Interactions.InitiationTypes.AUTO;b.countAsClick=d.fClick;if(d.agencyURL)b.remoteServers.agencyUrl=d.agencyURL;if(d.networkURL)b.remoteServers.networkUrl=d.networkURL;this._adjustClickTarget(a);b.clickData=d;b.reportImmediately=c?!0:!1;a=new EBG.Interactions.CounterInteraction(b);EBG.intMgr.addInteraction(a)},_addVideoInteractions:function(){},_addCustomInteractions:function(){},
_adjustClickTarget:function(a){var a=this._adConfig.interactions[a],b;switch(a.target){case 0:b=EBG.WindowTarget.SELF;break;case 2:b=EBG.WindowTarget.TOP;break;default:b=EBG.WindowTarget.BLANK}a.target=b},_subscribeToEvents:function(){this._adConfig.interactionsToReport&&this._subscribeToAdEvent(EBG.Events.EventNames.ADD_INTERACTION,this._handleInteractionsSubscription,EBG.Events.EventTiming.BEFORE);this._subscribeToAdEvent(EBG.EBMessage.CLICKTHROUGH,this._counterInteractionHandler);this._subscribeToAdEvent(EBG.EBMessage.VERSION_TRACKING_IMPRESSION,
this._versionTrackingImpressionHandler);this._subscribeToAdEvent(EBG.Events.EventNames.DEFAULT_CLICK,this._counterInteractionHandler);this._subscribeToAdEvent(EBG.Events.EventNames.ADD_CREATIVES,this._onAddCreativesHandler,EBG.Events.EventTiming.ONTIME);this._subscribeToAdEvent(EBG.Events.EventNames.SHOW_AD,this._onDownloadHandler,EBG.Events.EventTiming.ONTIME);this._subscribeToAdEvent(EBG.Events.EventNames.SHOW_AD,this._onPlayHandler,EBG.Events.EventTiming.AFTER);this._subscribeToAdEvent(EBG.Events.EventNames.SHOW_AD,
this._collectUrl,EBG.Events.EventTiming.AFTER)},_handleInteractionsSubscription:function(a){try{var b=a.eventData.interactionData.reportingName;return this._adConfig.interactionsToReport&&this._adConfig.interactionsToReport[b]?!0:!1}catch(c){}},_onAddCreativesHandler:function(a){try{if(!EBG.Initializer._getAdClass({tn:this._adConfig.templateName}).requiresIframeBust||EBG.adaptor.serving&&EBG.adaptor.serving.detectServingMode(!0)==EBG.Adaptors.ServingMode.SCRIPT){var b=a.dispatcher._adConfig.placeHolderId;
if(b){var c=EBG.adaptor.getDisplayWin().document.getElementById(b);if(c)c.style.backgroundImage="",c.onclick=function(){}}}}catch(d){}},_onAdCreativesAdded:function(){var a=new EBG.Events.Event(EBG.Events.EventNames.AD_CREATIVES_ADDED);a.dispatcher=this;EBG.eventMgr.dispatchEvent(a)},_fixPage:function(){var a=this._adConfig.page,a=a.replace(/\~/ig,"_"),a=a.replace(/\^/ig,"_"),a=a.replace(/\|/ig,"_"),a=escape(a);this._adConfig.page=a},_updateURLs:function(){for(var a=this._adConfig.clickTrackingUrls,
b=0;b<a.length;b++)a[b]=this._replaceURLTokens(a[b]);var a=this._adConfig.interactions,c;for(c in a)if(a.hasOwnProperty(c))a[c].agencyURL=this._replaceURLTokens(a[c].agencyURL),a[c].networkURL=this._replaceURLTokens(a[c].networkURL),a[c].jumpUrl=this._replaceURLTokens(a[c].jumpUrl)},getAdId:function(){return this._adConfig.adId},_replaceURLTokens:function(a){var b=this._adConfig;try{a&&(a=a.replace(/\[ebRandom\]/ig,b.rnd),a=a.replace(/\[timestamp\]/ig,b.rnd),a=a.replace(/\[%tp_adid%\]/ig,b.adId),
a=a.replace(/\[%tp_flightid%\]/ig,b.placementId),a=a.replace(/\[%tp_campaignid%\]/ig,b.campaignId));if(!a||!b.sUrlTokens)return a;if(!EBG.isObj(b.objURLTokens))b.oURLTokens=this._pairsToObj(b.sUrlTokens,"$$");for(var c in b.oURLTokens)b.oURLTokens.hasOwnProperty(c)&&(a=a.replace(RegExp("\\[%"+c+"%\\]","ig"),b.oURLTokens[c]))}catch(d){}return a},_pairsToObj:function(a,b){for(var c={},d=unescape(a).split(b),e=0;e<d.length;e++)try{if(d[e]){var f=d[e].indexOf("="),g=d[e].substr(0,f),h=d[e].substr(f+1);
c[g]=escape(h)}}catch(i){}return c},_subscribeToAdEvent:function(a,b,c){a=new EBG.Events.EventSubscription(a,b,this);a.dispatcherFilters={"_adConfig.rnd":this._adConfig.rnd};if(c)a.timing=c;EBG.eventMgr.subscribeToEvent(a)},_getCDIUrl:function(){var a=EBG.format("{0}{1}/BurstingPipe/adServer.bs?cn=cdi&ai={2}&p={3}&pluid={4}&ru={5}&pc={6}&ord={7}",EBG.protocol,EBG.bs,this._adConfig.adId,this._adConfig.page,EBG.pluId,EBG.combinePaths(ebResourcePath,this._adConfig.defaultImagePath),this._adConfig.sPublisherPlacementId,
this._adConfig.rnd),b=this._adConfig.massVersioning.targetAudienceId;b&&(a+=EBG.format("&ta={0}",b));(b=this._adConfig.massVersioning.deliveryGroupId)&&(a+=EBG.format("&dg={0}",b));return a},buildJSONImgObj:function(a,b){return{tagName:EBG.Adaptors.TagNames.IMG,attributes:{id:EBG.format(a+"_{0}",this._adConfig.uid),src:b,width:this._adConfig.width,height:this._adConfig.height,style:{width:this._adConfig.width,height:this._adConfig.height},title:this._adConfig.title?this._adConfig.title:""}}},setImageClick:function(a,
b){a.attributes.onclick=EBG.format('EBG.Ads.Ad.Fn.onImageClick("{0}", {1},"{2}")',this._adConfig.uid,b,a.attributes.id);EBG.mergeObj({cursor:"pointer; cursor: hand"},a.attributes.style)},showDefaultImage:function(){var a=!this._adConfig.imageOnly,b=this.buildJSONImgObj("ebDefaultImg",this._adConfig.showOnlyImage||this._adConfig.imageOnly?EBG.combinePaths(ebResourcePath,this._adConfig.defaultImagePath):this._getCDIUrl());(a?this._adConfig.interactions[EBG.Interactions.SystemInts.DEFAULT_CLICK].jumpUrl:
this._adConfig.interactions[EBG.Interactions.SystemInts.CLICK].jumpUrl)&&this.setImageClick(b,a);a=new EBG.Events.Event(EBG.Events.EventNames.ADD_BANNER_DEFAULT_IMAGE_CREATIVE);a.eventData={assetId:b.attributes.id};a.dispatcher=this;a.timing=EBG.Events.EventTiming.BEFORE;if(!EBG.eventMgr.dispatchEvent(a)){var b=EBG.adaptor._getTags(b),c=EBG.adaptor.getElementById(this._adConfig.placeHolderId);EBG.adaptor.setInnerHtml(c,b);a.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(a)}},
dispatchCustomEvent:function(a,b,c,d){a=new EBG.Events.Event(a);a.dispatcher=d;a.eventData={assetId:b};a.timing=c;return EBG.eventMgr.dispatchEvent(a)}};EBG.declareClass(EBG.Ads.Ad,null);
EBG.Ads.Ad.Fn={getAdIdFromAdUId:function(a){return a.split("_")[0]},getRandFromAdUId:function(a){return a.split("_")[1]},onImageClick:function(a,b,c){try{var d=b?new EBG.Events.Event(EBG.Events.EventNames.DEFAULT_CLICK):new EBG.Events.Event(EBG.EBMessage.CLICKTHROUGH);d.eventData=b?{intName:EBG.Interactions.SystemInts.DEFAULT_CLICK}:{intName:EBG.Interactions.SystemInts.CLICK};d.dispatcher=EBG.ads[a];EBG.eventMgr.dispatchEvent(d);EBG.adaptor.intMonitorExist()&&EBG.adaptor.notifyIntMonitor({command:EBG.EBMessage.CLICKTHROUGH,
args:"",objName:c,adId:this.getAdIdFromAdUId(a)})}catch(e){}},getVersionToReport:function(a){return-1<a.indexOf(",")?"m":a},getAdVersions:function(a){for(var b="",a=a.adVersions.split(","),c=0;c<a.length;c++)b&&(b+=","),b+=a[c];return b}};EBG.Ads.VisibilityAd=function(a){this.resizePlaceHolder=!1;a.templateName=EBG.adTypes.VisibilityAd;a.showOnlyImage=0;EBG.callSuperConstructor(EBG.Ads.VisibilityAd,this,[a])};EBG.Ads.VisibilityAd.requiresIframeBust=!0;
EBG.Ads.VisibilityAd.prototype={aboveTheFoldMgr:null,visibilityMgr:null,_isStdAd:function(){return!1},_addCreatives:function(){this.addCreativesHandler({eventData:this._adConfig.placeHolderId})},_subscribeToEvents:function(){try{this._subscribeToAdEvent(EBG.Events.EventNames.SHOW_AD,this.adCreativesAddedHandler,EBG.Events.EventTiming.AFTER),this._subscribeToAdEvent(EBG.Events.EventNames.ADD_CREATIVES,this.addCreativesHandler,EBG.Events.EventTiming.ONTIME)}catch(a){}},addCreativesHandler:function(a){try{var b=
a.eventData;if(EBG.adaptor.serving&&EBG.adaptor.serving.servingMode==EBG.Adaptors.ServingMode.INNER_IFRAME&&EBG.adaptor.serving.placementIframe)EBG.adaptor.serving.placementIframe.id?b=EBG.adaptor.serving.placementIframe.id:EBG.adaptor.serving.placementIframe.id=a.eventData;if(!this.aboveTheFoldMgr)this.aboveTheFoldMgr=new EBG.RichModules.AboveTheFoldManager(this._adConfig);this.aboveTheFoldMgr.checkAboveTheFold(b);if(!this.visibilityMgr)this.visibilityMgr=new EBG.RichModules.VisibilityManager(this._adConfig);
this.visibilityMgr.checkVisibility(b)}catch(c){}},_addSystemInteractions:function(){try{var a=EBG.Interactions.Categories.SYSTEM;this._addTimerInteraction(EBG.Interactions.SystemInts.ABOVE_THE_FOLD_DURATION,a);this._addCounterInteraction(EBG.Interactions.SystemInts.ABOVE_THE_FOLD,a,!0,1);this._addCounterInteraction(EBG.Interactions.SystemInts.BELOW_THE_FOLD,a,null,1);this._addCounterInteraction(EBG.Interactions.SystemInts.VISIBILITY_RECORDABLE,a,!1,1);this._addCounterInteraction(EBG.Interactions.SystemInts.VISIBILITY_AGENCY_RECORDABLE,
a,!1,1);this._addCounterInteraction(EBG.Interactions.SystemInts.VISIBILITY_ADVERTISER_RECORDABLE,a,!1,1);this._addCounterInteraction(EBG.Interactions.SystemInts.VISIBILITY_ADVERTISER,a,!1,1);this._addCounterInteraction(EBG.Interactions.SystemInts.VISIBILITY_AGENCY,a,!1,1);this._addCounterInteraction(EBG.Interactions.SystemInts.VISIBILITY_IAB,a,!1,1);this._addTimerInteraction(EBG.Interactions.SystemInts.VISIBLITY_AGENCY_DURATION,a);this._addTimerInteraction(EBG.Interactions.SystemInts.VISIBLITY_ADVERTISER_DURATION,
a);this._addTimerInteraction(EBG.Interactions.SystemInts.VISIBILITY_AVG_AD_SURFACE,a);this._addTimerInteraction(EBG.Interactions.SystemInts.VISIBILITY_AVG_SCREEN_SHARE,a)}catch(b){}},_addCounterInteraction:function(a,b,c,d,e){a=new EBG.Interactions.CounterInteractionData(a,b,this._adConfig.uid);if(e)a.isPanel=!0;a.initiationType=EBG.Interactions.InitiationTypes.AUTO;a.numLeftToReport=d?d:a.numLeftToReport;a.reportImmediately=c?!0:!1;c=new EBG.Interactions.CounterInteraction(a);EBG.intMgr.addInteraction(c)},
_addTimerInteraction:function(a,b,c){a=new EBG.Interactions.TimerInteractionData(a,b,this._adConfig.uid);if(c)a.isPanel=c;c=new EBG.Interactions.TimerInteraction(a);EBG.intMgr.addInteraction(c)},subscribeToStandardElementEvents:function(a){var b=new EBG.Events.EventSubscription("mouseover",this._handleMouseEvent,this);b.isElementEvent=!0;b.elementId=a;EBG.eventMgr.subscribeToEvent(b);b=new EBG.Events.EventSubscription("mouseout",this._handleMouseEvent,this);b.isElementEvent=!0;b.elementId=a;EBG.eventMgr.subscribeToEvent(b)},
_handleMouseEvent:function(a){var b=a.currentTarget?a.currentTarget:a.srcElement,c="",d=b.id,e=d.lastIndexOf("_")+1;e&&(c=d.substring(e));a="mouseover"==a.type?new EBG.Events.Event(EBG.Events.EventNames.MOUSE_OVER):new EBG.Events.Event(EBG.Events.EventNames.MOUSE_OUT);a.dispatcher={_adConfig:{rnd:c}};a.eventData={target:b};EBG.eventMgr.dispatchEvent(a)}};EBG.declareClass(EBG.Ads.VisibilityAd,EBG.Ads.Ad);EBG.declareNamespace("Initializer");
EBG.Initializer={initialize:function(){var a=null,b;if(!(void 0!==b&&b)&&(a=EBG.Initializer._getCurrentServerResponse(),EBG.Initializer._initGlobals(a),EBG.Initializer._callExtensionHooks(a),EBG.Initializer._initAdaptor(a),EBG.Initializer._initInteractionManager(),EBG.Initializer._updateAdConfig(a),EBG.Initializer._initPositioningHelper(),EBG.Initializer._shouldInitAd(a))){if(!EBG.isDefined(EBG.adaptor.getDisplayWin().EBG))EBG.adaptor.getDisplayWin().EBG=EBG;EBG.Initializer._initAd(a)}return a},_shouldInitAd:function(a){return a.innerIframe||
0==a.ifrm||-1==a.ifrm&&EBG.adaptor.serving&&EBG.adaptor.serving.servingMode!=EBG.Adaptors.ServingMode.IFRAME},_getCurrentServerResponse:function(){for(var a=0,b;a<ebOArr.length;){if((b=ebOArr[a])&&this._getAdClass(b)){ebOArr.splice(a,1);break}a++}return b},_initGlobals:function(a){var b=navigator.userAgent.toLowerCase();EBG.isOfflineDemo=EBG.isGlobalDef("gEbfOfflineDemo")?gEbfOfflineDemo:!1;EBG.resourcePath=ebResourcePath;EBG.sms=a.sms?a.sms:"";EBG.fcsVirtualPath=a.fvp?a.fvp:"";EBG.pluId=a.pi;EBG.dataCapture=
EBG.bs=a.bs;EBG.protocol=ebPtcl;EBG.pageGUID=EBG.pageGUID?EBG.pageGUID:a.rnd;EBG.reportPageVer=a.rpv;EBG.html5Ver=a.html5v;EBG.intReportTimeout=EBG.isDefined(a.irt)?a.irt:null;EBG.isMSNMessenger=(-1<b.indexOf("msn messenger")||-1<b.indexOf("windows live messenger"))&&window==parent;EBG.isIMBanner=EBG.isGlobalDef("gfEbExpBanerIM")?gfEbExpBanerIM:EBG.isGlobalDef("gfEbExpBannerIM")?gfEbExpBannerIM:!1;EBG.isPreview=!!a.pr;EBG.isInWorkshop=EBG.isGlobalDef("gEbFlyLocal")?gEbFlyLocal:!1;EBG.iframeLocation=
a.ifl?a.ifl:EBG.isGlobalDef("gstrEbIframeLocation")?gstrEbIframeLocation:void 0;EBG.minZIndex=a.z?a.z:EBG.isGlobalDef("gnEbMinZIndex")?gnEbMinZIndex:1E3;EBG.eyeDivRefElement=EBG.isGlobalDef("gEbEyeDivRefElement")?gEbEyeDivRefElement:!1;EBG.eventMgr=EBG.eventMgr||new EBG.Events.EventManager;EBG.ads=EBG.ads||{}},_initServingMode:function(a){var b=this._getAdClass(a);if(a.requiresIframeBust=b.requiresIframeBust){if(a.innerIframe)a.ifrm=EBG.Adaptors.ServingMode.INNER_IFRAME;if(!a.ifrm||a.soi)a.ifrm=0;
EBG.adaptor.initServingMode(a.ifrm);if(EBG.adaptor.inPlacementIframe())EBG.adaptor.serving.ebO=EBG.cloneObj(a),EBG.adaptor.serving.insertInnerIframe(a.phid)}else{a.ifrm=0;var c=EBGInfra.isDefined(EBG.adaptor.serving)?EBG.adaptor.serving.detectServingMode(!0):null;if(b!=EBG.Ads.StdBanner){EBG.adaptor.initServingMode(a.ifrm,!b.requiresIframeBust);if(EBG.adaptor.serving.isFIF()||c==EBG.Adaptors.ServingMode.FRIENDLY_IFRAME){a.adConfig.UiVz=!1;try{document.close()}catch(d){}}if(c==EBG.Adaptors.ServingMode.SCRIPT)a.adConfig.UiVz=
!1}}},_callExtensionHooks:function(a){if(a.extensionHooks)for(;0!==a.extensionHooks.length;)a.extensionHooks.pop().apply(null,[a.adConfig])},getRichestAdaptor:function(){for(var a=[EBG.Adaptors.StdWebAdaptor,EBG.Adaptors.WebAdaptor],b=a.length-1;0<=b;b--)if(a[b])return a[b]},getRichestInteractionManager:function(){for(var a=[EBG.Interactions.StdInteractionManager,EBG.Interactions.InteractionManager],b=a.length-1;0<=b;b--)if(a[b])return a[b]},_initAdaptor:function(a){var b=this.getRichestAdaptor(),
c=new EBG.Events.Event(EBG.Events.EventNames.CREATE_ADAPTOR);c.eventData={currentClass:b};c.timing=EBG.Events.EventTiming.BEFORE;EBG.eventMgr.dispatchEvent(c);if("undefined"==typeof EBG.adaptor||EBG.adaptor.constructor.toString()!=c.eventData.currentClass.toString())b=new c.eventData.currentClass,EBG.adaptor=b;c.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(c);EBG.adaptor.initInnerModules(a.plt,a.bt,a.bv);this._initServingMode(a);EBG.eventMgr.attachToAdaptor()},_initInteractionManager:function(){newEvent=
new EBG.Events.Event(EBG.Events.EventNames.CREATE_INT_MGR);newEvent.eventData={currentClass:this.getRichestInteractionManager()};newEvent.timing=EBG.Events.EventTiming.BEFORE;EBG.eventMgr.dispatchEvent(newEvent);if("undefined"==typeof EBG.intMgr||EBG.intMgr.constructor.toString()!=newEvent.eventData.currentClass.toString()){var a=new newEvent.eventData.currentClass;EBG.intMgr=a}newEvent.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(newEvent)},_initPositioningHelper:function(){try{if(EBG.Positioning&&
EBG.Positioning.PositionManager){newEvent=new EBG.Events.Event(EBG.Events.EventNames.CREATE_POSITIONING_HELPER);newEvent.eventData=EBG.Positioning.PositionManager;newEvent.timing=EBG.Events.EventTiming.BEFORE;EBG.eventMgr.dispatchEvent(newEvent);if(!EBG.posHelper)EBG.posHelper=new newEvent.eventData;newEvent.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(newEvent)}}catch(a){}},_initAd:function(a){var b=this._getAdClass(a);newEvent=new EBG.Events.Event(EBG.Events.EventNames.CREATE_AD);
newEvent.eventData={currentClass:b,adConfig:a.adConfig};newEvent.timing=EBG.Events.EventTiming.BEFORE;EBG.eventMgr.dispatchEvent(newEvent);b=new newEvent.eventData.currentClass(a.adConfig);newEvent.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(newEvent);EBG.ads[a.adConfig.uid]=b;EBG.adaptor.getDisplayWin().EBG.ads[a.adConfig.uid]||(EBG.adaptor.getDisplayWin().EBG.ads[a.adConfig.uid]=EBG.ads[a.adConfig.uid]);if(EBGInfra.isDefined(EBG.BWDetection)&&EBGInfra.isDefined(window.gEBMainWindow)&&
EBGInfra.isDefined(gEBMainWindow.ebBW)&&EBGInfra.isDefined(gEBMainWindow.ebBW.checked))EBG.BWDetection.speed=gEBMainWindow.ebBW.speed,EBG.BWDetection.checked=!0;if(a.adConfig.pckAssets){var b=0,c;for(c in a.adConfig.pckAssets)b++;0<b&&!EBG.BWDetection.checking&&!EBG.BWDetection.checked&&EBG.BWDetection.init()}},_getAdClass:function(a){var b;switch(a.tn){case EBG.adTypes.RichBannerHtml5:b=EBG.Ads.RichBannerHtml5;break;case EBG.adTypes.SEBannerHtml5:b=EBG.Ads.SEBannerHtml5;break;case EBG.adTypes.StdBanner:b=
a.btf||a.IABBV||a.IABEV?EBG.Ads.StdBannerEx:EBG.Ads.StdBanner;break;case EBG.adTypes.Banner:b=EBG.Ads.RichBanner;break;case EBG.adTypes.SEBanner:b=EBG.Ads.SEBanner;break;case EBG.adTypes.ExpBanner:b=EBG.Ads.ExpBanner;break;case EBG.adTypes.VisibilityAd:b=EBG.Ads.VisibilityAd}return b},_updateAdConfig:function(a){a.adConfig.rnd=a.rnd;a.adConfig.uid=EBG.format("{0}_{1}",a.adConfig.adId,a.adConfig.rnd);a.adConfig.placeHolderId=a.phid;a.adConfig.sUrlTokens=a.ut;if(!a.adConfig.clickTrackingUrls)a.adConfig.clickTrackingUrls=
[];a.ncu&&a.adConfig.clickTrackingUrls.push(a.ncu);if(a.soi)a.adConfig.showOnlyImage=a.soi;a.adConfig.imageOnly=!1;a.adConfig.page=a.p;a.adConfig.massVersioning={targetAudienceId:a.ta&&"-1"!=a.ta?a.ta:"",deliveryGroupId:a.dg&&"-1"!=a.dg?a.dg:"",adVersions:a.av?a.av:"",adBasePath:a.abp?a.abp:""};a.adConfig.mobileSDK=a.sdk?a.sdk:"";if("undefined"==typeof a.adConfig.openWindow)a.adConfig.openWindow=!0;this._updateAdConfigToHandleOpenWindow(a);a.adConfig.imagesDir=unescape(ebBigS)+"Res/Images"+ebO.imgv+
"/";a.adConfig.arrOnStartDnlEvents=a.osde;a.adConfig.arrOnPlayEvents=a.ope;EBG.adaptor.optOut=a.adConfig.optOut=a.oo?a.oo:0;EBG.adaptor.histLen=a.adConfig.histLen=a.hl?a.hl:30;a.adConfig.sPublisherPlacementId=a.ppi?a.ppi:"";a.adConfig.width=a.w?a.w:"";a.adConfig.height=a.h?a.h:"";a.adConfig.shouldCollectUrl=a.cu?a.cu:0;a.adConfig.sID=a.sid?a.sid:"";a.adConfig.dlm=a.dlm?a.dlm:3;a.adConfig.testImp=a.t?!0:!1;a.adConfig.usercookie=a.usercookie?a.usercookie:"";a.adConfig.visibility={};a.adConfig.visibility.mode=
EBG.VisibilityMode.DEFAULT_MODE;if(a.IABEV)a.adConfig.visibility.mode=EBG.VisibilityMode.ENHANCED_MODE;else if(a.IABBV)a.adConfig.visibility.mode=EBG.VisibilityMode.BASIC_MODE;a.adConfig.visibility.iabMinSurface=ebO.IABMS;a.adConfig.visibility.iabMinDuration=ebO.IABMD;a.adConfig.visibility.agencyMinSurface=ebO.AgMS?ebO.AgMS:ebO.IABMS;a.adConfig.visibility.agencyMinDuration=ebO.AgMD?ebO.AgMD:ebO.IABMD;a.adConfig.visibility.advertiserMinSurface=ebO.AdMS?ebO.AdMS:ebO.IABMS;a.adConfig.visibility.advertiserMinDuration=
ebO.AdMD?ebO.AdMD:ebO.IABMD;if(EBGInfra.isDefined(a.adConfig.interactionsToReport)&&a.adConfig.interactionsToReport.visibility)a.adConfig.interactionsToReport[EBG.Interactions.SystemInts.VISIBILITY_RECORDABLE]=EBG.Interactions.SystemInts.VISIBILITY_RECORDABLE,a.adConfig.interactionsToReport[EBG.Interactions.SystemInts.VISIBILITY_AGENCY_RECORDABLE]=EBG.Interactions.SystemInts.VISIBILITY_AGENCY_RECORDABLE,a.adConfig.interactionsToReport[EBG.Interactions.SystemInts.VISIBILITY_ADVERTISER_RECORDABLE]=
EBG.Interactions.SystemInts.VISIBILITY_ADVERTISER_RECORDABLE,a.adConfig.interactionsToReport[EBG.Interactions.SystemInts.VISIBILITY_ADVERTISER]=EBG.Interactions.SystemInts.VISIBILITY_ADVERTISER,a.adConfig.interactionsToReport[EBG.Interactions.SystemInts.VISIBILITY_AGENCY]=EBG.Interactions.SystemInts.VISIBILITY_AGENCY,a.adConfig.interactionsToReport[EBG.Interactions.SystemInts.VISIBILITY_IAB]=EBG.Interactions.SystemInts.VISIBILITY_IAB,a.adConfig.interactionsToReport[EBG.Interactions.SystemInts.VISIBLITY_ADVERTISER_DURATION]=
EBG.Interactions.SystemInts.VISIBLITY_ADVERTISER_DURATION,a.adConfig.interactionsToReport[EBG.Interactions.SystemInts.VISIBLITY_AGENCY_DURATION]=EBG.Interactions.SystemInts.VISIBLITY_AGENCY_DURATION,a.adConfig.interactionsToReport[EBG.Interactions.SystemInts.VISIBILITY_AVG_AD_SURFACE]=EBG.Interactions.SystemInts.VISIBILITY_AVG_AD_SURFACE,a.adConfig.interactionsToReport[EBG.Interactions.SystemInts.VISIBILITY_AVG_SCREEN_SHARE]=EBG.Interactions.SystemInts.VISIBILITY_AVG_SCREEN_SHARE,a.adConfig.interactionsToReport[EBG.Interactions.SystemInts.ABOVE_THE_FOLD]=
EBG.Interactions.SystemInts.ABOVE_THE_FOLD,a.adConfig.interactionsToReport[EBG.Interactions.SystemInts.ABOVE_THE_FOLD_DURATION]=EBG.Interactions.SystemInts.ABOVE_THE_FOLD_DURATION,a.adConfig.interactionsToReport[EBG.Interactions.SystemInts.BELOW_THE_FOLD]=EBG.Interactions.SystemInts.BELOW_THE_FOLD;if(EBGInfra.isDefined(a.adConfig.defaultFlashName)&&!EBGInfra.isDefined(a.adConfig.defaultFlashPath))a.adConfig.defaultFlashPath=a.adConfig.imagesDir+"BannerAssets/"+a.adConfig.defaultFlashName;if(a.btf)a.adConfig.btf=
a.btf;a.adConfig.offsetX=a.offsetX?a.offsetX:0;a.adConfig.offsetY=a.offsetY?a.offsetY:0;a.adConfig.adChoice={};a.adConfig.adChoice.certificationProgram=ebO.AcCP;a.adConfig.adChoice.customUrl=ebO.CAcURL;a.adConfig.adChoice.includeMarker=ebO.adConfig.AcIncludeMarker;a.adConfig.adChoice.iconPosition=parseInt(ebO.adConfig.AcIconPosition);if(a.wm)a.adConfig.wmode=a.wm.toLowerCase();try{if("undefined"!=typeof gEbBAd&&gEbBAd){if(gEbBAd.panelsWMode)a.adConfig.panelsWMode=gEbBAd.panelsWMode;if(gEbBAd.strWmode)a.adConfig.wmode=
gEbBAd.strWmode.toLowerCase()}}catch(b){}},_updateAdConfigToHandleOpenWindow:function(a){a.adConfig.bsPath=EBG.bs;a.adConfig.pluId=EBG.pluId;a.adConfig.protocol=EBG.protocol;a.adConfig.isPreview=!!a.pr}};
try{var currentResponse=EBG.Initializer.initialize();if(currentResponse.adConfig.UiVz&&!currentResponse.requiresIframeBust&&"Visibility"!=currentResponse.tn){var vizClone=EBG.cloneObj(currentResponse);vizClone.tn=vizClone.adConfig.templateName="Visibility";vizClone.ifrm=2;vizClone.soi=0;ebOArr[ebOArr.length]=vizClone;var newEbSrc=ebSrc.replace(currentResponse.tn,vizClone.tn),newEbSrc=newEbSrc.replace(/ex(debug|)\.js/ig,".js"),newScript=document.createElement("SCRIPT");newScript.src=newEbSrc;var target=
document.getElementById(vizClone.phid);target&&target.appendChild(newScript)}}catch(e$$46){};
